using MeetingRoomObserver.Handler;
using MeetingRoomObserver.Handler.DTOs;
using Xunit;

namespace MeetingRoomObserverUnitTests.Handler
{
    public class MeetingEventParserTests
    {
        [Fact]
        public void VotingEndsEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""ei"":1,""ei-ots"":""Vastustaa"",""tyyppi-teksti"":""Toivomusponsi"",""aikaleima"":""2019-12-11T16:46:45"",""jaa"":76,""jaa-ots"":""Vuorjoki Anna /1"",""ei-teksti_sv"":"""",""jaa-teksti"":""Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. "",""jaa-teksti_sv"":""Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården."",""laji"":""aanestys paattynyt"",""tyyppi"":""PON"",""poissa"":4,""ei-teksti"":"""",""jaa-ots_sv"":""Vuorjoki Anna /1"",""snro"":3025714002,""tyyppi-teksti_sv"":""Hemställningskläm"",""numero"":1,""aanet"":[{""hlo_sv"":""Finne-Elonen Laura /SFP"",""hlo"":""Finne-Elonen Laura /SFP"",""aani"":""JAA""},{""hlo_sv"":""Hamid Jasmin /Gröna"",""hlo"":""Hamid Jasmin /Vihr."",""aani"":""TYHJA""},{""hlo_sv"":""Järvinen Jukka /SDP"",""hlo"":""Järvinen Jukka /SDP"",""aani"":""JAA""},{""hlo_sv"":""Ebeling Mika /KD"",""hlo"":""Ebeling Mika /KD"",""aani"":""JAA""},{""hlo_sv"":""Hakola Juha /Saml."",""hlo"":""Hakola Juha /Kok."",""aani"":""JAA""},{""hlo_sv"":""Raatikainen Mika /Sannf."",""hlo"":""Raatikainen Mika /PerusS"",""aani"":""JAA""},{""hlo_sv"":""Rydman Wille /Saml."",""hlo"":""Rydman Wille /Kok."",""aani"":""POISSA""},{""hlo_sv"":""Sevander Tomi /SDP"",""hlo"":""Sevander Tomi /SDP"",""aani"":""JAA""},{""hlo_sv"":""Sydänmaa Johanna /Gröna"",""hlo"":""Sydänmaa Johanna /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Laisaari Johanna /SDP"",""hlo"":""Laisaari Johanna /SDP"",""aani"":""JAA""},{""hlo_sv"":""Oskala Hannu /Gröna"",""hlo"":""Oskala Hannu /Vihr."",""aani"":""TYHJA""},{""hlo_sv"":""Apter Ted /Saml."",""hlo"":""Apter Ted /Kok."",""aani"":""JAA""},{""hlo_sv"":""Arajärvi Pentti /SDP"",""hlo"":""Arajärvi Pentti /SDP"",""aani"":""JAA""},{""hlo_sv"":""Honkasalo Veronika /Vänst."",""hlo"":""Honkasalo Veronika /Vas."",""aani"":""JAA""},{""hlo_sv"":""Jalovaara Ville /SDP"",""hlo"":""Jalovaara Ville /SDP"",""aani"":""JAA""},{""hlo_sv"":""Juva Kati /Gröna"",""hlo"":""Juva Kati /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Kivekäs Otso /Gröna"",""hlo"":""Kivekäs Otso /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Klemetti Tapio /Saml."",""hlo"":""Klemetti Tapio /Kok."",""aani"":""JAA""},{""hlo_sv"":""Koivulaakso Dan /Vänst."",""hlo"":""Koivulaakso Dan /Vas."",""aani"":""JAA""},{""hlo_sv"":""Korkkula Vesa /Vänst."",""hlo"":""Korkkula Vesa /Vas."",""aani"":""JAA""},{""hlo_sv"":""Laaksonen Heimo /Saml."",""hlo"":""Laaksonen Heimo /Kok."",""aani"":""JAA""},{""hlo_sv"":""Holopainen Mari /Gröna"",""hlo"":""Holopainen Mari /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Hussein Abdirahim Husu /SDP"",""hlo"":""Hussein Abdirahim Husu /SDP"",""aani"":""POISSA""},{""hlo_sv"":""Muttilainen Sami /Vänst."",""hlo"":""Muttilainen Sami /Vas."",""aani"":""JAA""},{""hlo_sv"":""Månsson Björn /SFP"",""hlo"":""Månsson Björn /SFP"",""aani"":""JAA""},{""hlo_sv"":""Ohisalo Maria /Gröna"",""hlo"":""Ohisalo Maria /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Pasterstein Dennis /Saml."",""hlo"":""Pasterstein Dennis /Kok."",""aani"":""JAA""},{""hlo_sv"":""Rantala Marcus /SFP"",""hlo"":""Rantala Marcus /SFP"",""aani"":""JAA""},{""hlo_sv"":""Rantanen Mari /Sannf."",""hlo"":""Rantanen Mari /PerusS"",""aani"":""JAA""},{""hlo_sv"":""Stranius Leo /Gröna"",""hlo"":""Stranius Leo /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Torsti Pilvi /SDP"",""hlo"":""Torsti Pilvi /SDP"",""aani"":""JAA""},{""hlo_sv"":""Vepsä Sinikka /SDP"",""hlo"":""Vepsä Sinikka /SDP"",""aani"":""JAA""},{""hlo_sv"":""Karhuvaara Arja /Saml."",""hlo"":""Karhuvaara Arja /Kok."",""aani"":""JAA""},{""hlo_sv"":""Vuorjoki Anna /Vänst."",""hlo"":""Vuorjoki Anna /Vas."",""aani"":""JAA""},{""hlo_sv"":""Kari Emma /Gröna"",""hlo"":""Kari Emma /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Kolbe Laura /Cent."",""hlo"":""Kolbe Laura /Kesk."",""aani"":""JAA""},{""hlo_sv"":""Anttila Maija /SDP"",""hlo"":""Anttila Maija /SDP"",""aani"":""JAA""},{""hlo_sv"":""Koskinen Kauko /Saml."",""hlo"":""Koskinen Kauko /Kok."",""aani"":""JAA""},{""hlo_sv"":""Alametsä Alviina /Gröna"",""hlo"":""Alametsä Alviina /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Aro Katju /FP"",""hlo"":""Aro Katju /FP"",""aani"":""JAA""},{""hlo_sv"":""Biaudet Eva /SFP"",""hlo"":""Biaudet Eva /SFP"",""aani"":""JAA""},{""hlo_sv"":""Diarra Fatim /Gröna"",""hlo"":""Diarra Fatim /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Koulumies Terhi /Saml."",""hlo"":""Koulumies Terhi /Kok."",""aani"":""JAA""},{""hlo_sv"":""Haglund Mia /Vänst."",""hlo"":""Haglund Mia /Vas."",""aani"":""JAA""},{""hlo_sv"":""Hagman Sandra /Vänst."",""hlo"":""Hagman Sandra /Vas."",""aani"":""JAA""},{""hlo_sv"":""Harjanne Atte /Gröna"",""hlo"":""Harjanne Atte /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Harkimo Joel /Liik"",""hlo"":""Harkimo Joel /Liik"",""aani"":""POISSA""},{""hlo_sv"":""Heinäluoma Eveliina /SDP"",""hlo"":""Heinäluoma Eveliina /SDP"",""aani"":""JAA""},{""hlo_sv"":""Hernberg Kaisa /Gröna"",""hlo"":""Hernberg Kaisa /Vihr."",""aani"":""TYHJA""},{""hlo_sv"":""Kaleva Atte /Saml."",""hlo"":""Kaleva Atte /Kok."",""aani"":""JAA""},{""hlo_sv"":""Kopra Pia /Sannf."",""hlo"":""Kopra Pia /PerusS"",""aani"":""JAA""},{""hlo_sv"":""Meri Otto /Saml."",""hlo"":""Meri Otto /Kok."",""aani"":""EI""},{""hlo_sv"":""Niinistö Jussi /Blå"",""hlo"":""Niinistö Jussi /Sin"",""aani"":""JAA""},{""hlo_sv"":""Niskanen Dani /Saml."",""hlo"":""Niskanen Dani /Kok."",""aani"":""JAA""},{""hlo_sv"":""Nygård Mia /Saml."",""hlo"":""Nygård Mia /Kok."",""aani"":""JAA""},{""hlo_sv"":""Pajunen Jenni /Saml."",""hlo"":""Pajunen Jenni /Kok."",""aani"":""JAA""},{""hlo_sv"":""Parpala Matti /Saml."",""hlo"":""Parpala Matti /Kok."",""aani"":""JAA""},{""hlo_sv"":""Pennanen Petrus /ÖP"",""hlo"":""Pennanen Petrus /AP"",""aani"":""JAA""},{""hlo_sv"":""Saxberg Mirita /Liik"",""hlo"":""Saxberg Mirita /Liik"",""aani"":""JAA""},{""hlo_sv"":""Sazonov Daniel /Saml."",""hlo"":""Sazonov Daniel /Kok."",""aani"":""JAA""},{""hlo_sv"":""Silvo Satu /Gröna"",""hlo"":""Silvo Satu /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Sinnemäki Anni /Gröna"",""hlo"":""Sinnemäki Anni /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Terho Sampo /Blå"",""hlo"":""Terho Sampo /Sin"",""aani"":""JAA""},{""hlo_sv"":""Turkkila Matias /Sannf."",""hlo"":""Turkkila Matias /PerusS"",""aani"":""JAA""},{""hlo_sv"":""Vanhanen Reetta /Gröna"",""hlo"":""Vanhanen Reetta /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Varjokari Laura /Saml."",""hlo"":""Varjokari Laura /Kok."",""aani"":""JAA""},{""hlo_sv"":""Väyrynen Paavo /SH"",""hlo"":""Väyrynen Paavo /TH"",""aani"":""JAA""},{""hlo_sv"":""Yanar Ozan /Gröna"",""hlo"":""Yanar Ozan /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Alanen Outi /Vänst."",""hlo"":""Alanen Outi /Vas."",""aani"":""JAA""},{""hlo_sv"":""Arhinmäki Paavo /Vänst."",""hlo"":""Arhinmäki Paavo /Vas."",""aani"":""JAA""},{""hlo_sv"":""Moisio Elina /Gröna"",""hlo"":""Moisio Elina /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Pakarinen Pia /Saml."",""hlo"":""Pakarinen Pia /Kok."",""aani"":""JAA""},{""hlo_sv"":""Asko-Seljavaara Sirpa /Saml."",""hlo"":""Asko-Seljavaara Sirpa /Kok."",""aani"":""JAA""},{""hlo_sv"":""Pelkonen Jaana /Saml."",""hlo"":""Pelkonen Jaana /Kok."",""aani"":""JAA""},{""hlo_sv"":""Peltokorpi Terhi /Cent."",""hlo"":""Peltokorpi Terhi /Kesk."",""aani"":""JAA""},{""hlo_sv"":""Puhakka Sirpa /Vänst."",""hlo"":""Puhakka Sirpa /Vas."",""aani"":""JAA""},{""hlo_sv"":""Rantanen Tuomas /Gröna"",""hlo"":""Rantanen Tuomas /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Rautava Risto /Saml."",""hlo"":""Rautava Risto /Kok."",""aani"":""JAA""},{""hlo_sv"":""Soininvaara Osmo /Gröna"",""hlo"":""Soininvaara Osmo /Vihr."",""aani"":""JAA""},{""hlo_sv"":""Taipale Ilkka /SDP"",""hlo"":""Taipale Ilkka /SDP"",""aani"":""POISSA""},{""hlo_sv"":""Urho Ulla-Marja /Saml."",""hlo"":""Urho Ulla-Marja /Kok."",""aani"":""JAA""},{""hlo_sv"":""Wallgren Thomas /SDP"",""hlo"":""Wallgren Thomas /SDP"",""aani"":""JAA""},{""hlo_sv"":""Vesikansa Sanna /Gröna"",""hlo"":""Vesikansa Sanna /Vihr."",""aani"":""TYHJA""},{""hlo_sv"":""Bogomoloff Harry /Saml."",""hlo"":""Bogomoloff Harry /Kok."",""aani"":""JAA""},{""hlo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""hlo"":""Borgarsdóttir Sandelin Silja /SFP"",""aani"":""JAA""}],""ei-ots_sv"":""Motsätter sig"",""tyhjia"":4}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""AANLOPPUU"",""paatosehdotus_sv"":""Stadsfullmäktige beslutar anteckna bilagan till detta ärende med en utredning om de åtgärder som vidtagits med anledning av utvärderingsberättelsen för år 2018.\n\n"",""asianumero"":""6"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Selvitys vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä"",""snro"":3025714001,""asiateksti_sv"":""Utredning om åtgärderna med anledning av utvärderingsberättelsen för år 2018"",""tila"":""aanestys paattynyt"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi esityslistan liitteenä olevan selvityksen vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var votingEvent = result.Events[0] as VotingEndsRoomEventDTO;
            Assert.NotNull(votingEvent);
            Assert.Equal("Vastustaa", votingEvent.NayTitleFI);
            Assert.Equal("Toivomusponsi", votingEvent.VotingTypeTextFI);
            Assert.Equal("Hemställningskläm", votingEvent.VotingTypeTextSV);
            Assert.Equal("Vuorjoki Anna /1", votingEvent.AyeTitleFI);
            Assert.Equal("Vuorjoki Anna /1", votingEvent.AyeTitleSV);
            Assert.Equal("", votingEvent.NayTextFI);
            Assert.Equal("", votingEvent.NayTextSV);
            Assert.Equal("Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. ", votingEvent.AyeTextFI);
            Assert.Equal("Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården.", votingEvent.AyeTextSV);
            Assert.Equal("PON", votingEvent.VotingType);
            Assert.Equal(1, votingEvent.Number);
            Assert.Equal(76, votingEvent.AyeCount);
            Assert.Equal(1, votingEvent.NayCount);
            Assert.Equal(4, votingEvent.AbsentCount);
            Assert.Equal(4, votingEvent.EmptyCount);

            Assert.Equal(85, votingEvent.Votes!.Length);
            Assert.Equal("JAA", votingEvent.Votes[0].VoteType);
            Assert.Equal("Finne-Elonen Laura /SFP", votingEvent.Votes[0].NameFI);
            Assert.Equal("Finne-Elonen Laura /SFP", votingEvent.Votes[0].NameSV);
        }


        [Fact]
        public void VotingStartsEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""ei-ots"":""Vastustaa"",""tyyppi-teksti"":""Toivomusponsi"",""aikaleima"":""2019-12-11T16:46:27"",""jaa-ots"":""Vuorjoki Anna /1"",""ei-teksti_sv"":"""",""jaa-teksti"":""Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. "",""jaa-teksti_sv"":""Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården."",""laji"":""aanestys alkaa"",""tyyppi"":""PON"",""ei-teksti"":"""",""jaa-ots_sv"":""Vuorjoki Anna /1"",""snro"":3007850002,""tyyppi-teksti_sv"":""Hemställningskläm"",""numero"":1,""ei-ots_sv"":""Motsätter sig""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""AANALKAA"",""paatosehdotus_sv"":""Stadsfullmäktige beslutar anteckna bilagan till detta ärende med en utredning om de åtgärder som vidtagits med anledning av utvärderingsberättelsen för år 2018.\n\n"",""asianumero"":""6"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Selvitys vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä"",""snro"":3007850001,""asiateksti_sv"":""Utredning om åtgärderna med anledning av utvärderingsberättelsen för år 2018"",""tila"":""aanestys kaynnissa"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi esityslistan liitteenä olevan selvityksen vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var votingEvent = result.Events[0] as VotingStartsRoomEventDTO;
            Assert.NotNull(votingEvent);
            Assert.Equal("Vastustaa", votingEvent.NayTitleFI);
            Assert.Equal("Toivomusponsi", votingEvent.VotingTypeTextFI);
            Assert.Equal("Hemställningskläm", votingEvent.VotingTypeTextSV);
            Assert.Equal("Vuorjoki Anna /1", votingEvent.AyeTitleFI);
            Assert.Equal("Vuorjoki Anna /1", votingEvent.AyeTitleSV);
            Assert.Equal("", votingEvent.NayTextFI);
            Assert.Equal("", votingEvent.NayTextSV);
            Assert.Equal("Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. ", votingEvent.AyeTextFI);
            Assert.Equal("Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården.", votingEvent.AyeTextSV);
            Assert.Equal("PON", votingEvent.VotingType);
            Assert.Equal(1, votingEvent.Number);
        }

        [Fact]
        public void SpeechListEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""pidetyt puheenvuorot"",""pidetytpuheet"":[{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""alkamisaika"":""2019-12-11T16:08:46"",""tyyppi"":""P"",""puheenkesto"":57,""paattymisaika"":""2019-12-11T16:09:43""}],""aikaleima"":""2019-12-11T16:09:44"",""snro"":805002002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""PIDPUHEENVUOROT"",""paatosehdotus_sv"":""Stadsfullmäktige antecknar de förtroendevaldas och tjänsteinnehavarnas redogörelser för bindningar som avses i 84?§ i kommunallagen.\n\n"",""asianumero"":""3"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Lakisääteiset luottamushenkilöiden ja viranhaltijoiden sidonnaisuusilmoitukset"",""snro"":805002001,""asiateksti_sv"":""Förtroendevaldas och tjänsteinnehavares lagstadgade redogörelser för bindningar"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi luottamushenkilöiden ja viranhaltijoiden kuntalain 84 §:n tarkoittamat sidonnaisuusilmoitukset.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var speechEvent = result.Events[0] as SpeechListRoomEventDTO;
            Assert.NotNull(speechEvent);
            Assert.Single(speechEvent.Speeches);

            var speech = speechEvent.Speeches[0];
            Assert.Equal("Koivulaakso Dan /Vas.", speech.PersonFI);
            Assert.Equal("Koivulaakso Dan /Vänst.", speech.PersonSV);
            Assert.Equal("P", speech.SpeectType);
            Assert.Equal(57, speech.Duration);
            Assert.Equal("11/12/2019 16.08.46", speech.StartTime.ToString("G"));
            Assert.Equal("11/12/2019 16.09.43", speech.EndTime.ToString("G"));
        }

        [Fact]
        public void SpeechEndsEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""henkilo_sv"":"""",""henkilo"":"""",""laji"":""puheenvuoro paattynyt"",""aikaleima"":""2019-12-11T16:09:44"",""snro"":804877002,""paikka"":""""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""PUHEENLOPPU"",""paatosehdotus_sv"":""Stadsfullmäktige antecknar de förtroendevaldas och tjänsteinnehavarnas redogörelser för bindningar som avses i 84?§ i kommunallagen.\n\n"",""asianumero"":""3"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Lakisääteiset luottamushenkilöiden ja viranhaltijoiden sidonnaisuusilmoitukset"",""snro"":804877001,""asiateksti_sv"":""Förtroendevaldas och tjänsteinnehavares lagstadgade redogörelser för bindningar"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi luottamushenkilöiden ja viranhaltijoiden kuntalain 84 §:n tarkoittamat sidonnaisuusilmoitukset.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var speechEvent = result.Events[0] as SpeechEndsRoomEventDTO;
            Assert.NotNull(speechEvent);
            Assert.Equal("", speechEvent.PersonFI);
            Assert.Equal("", speechEvent.PersonSV);
            Assert.Equal("", speechEvent.Seat);
        }

        [Fact]
        public void SpeechStartsEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""puheaika"":0,""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""puhekello"":0,""alkamisaika"":""2019-12-11T16:08:46"",""laji"":""puheenvuoro alkaa"",""aikaleima"":""2019-12-11T16:08:47"",""suunta"":""seis"",""snro"":747744002,""paikka"":""50"",""pvtyyppi"":""P""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""PUHEENALKU"",""paatosehdotus_sv"":""Stadsfullmäktige antecknar de förtroendevaldas och tjänsteinnehavarnas redogörelser för bindningar som avses i 84?§ i kommunallagen.\n\n"",""asianumero"":""3"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Lakisääteiset luottamushenkilöiden ja viranhaltijoiden sidonnaisuusilmoitukset"",""snro"":747744001,""asiateksti_sv"":""Förtroendevaldas och tjänsteinnehavares lagstadgade redogörelser för bindningar"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi luottamushenkilöiden ja viranhaltijoiden kuntalain 84 §:n tarkoittamat sidonnaisuusilmoitukset.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var speechEvent = result.Events[0] as SpeechStartsRoomEventDTO;
            Assert.NotNull(speechEvent);
            Assert.Equal(0, speechEvent.SpeechTime);
            Assert.Equal("Koivulaakso Dan /Vas.", speechEvent.PersonFI);
            Assert.Equal("Koivulaakso Dan /Vänst.", speechEvent.PersonSV);
            Assert.Equal(0, speechEvent.SpeechTimer);
            Assert.Equal(16, speechEvent.StartTime.Hour);
            Assert.Equal(8, speechEvent.StartTime.Minute);
            Assert.Equal(46, speechEvent.StartTime.Second);
            Assert.Equal("seis", speechEvent.Direction);
            Assert.Equal("50", speechEvent.Seat);
            Assert.Equal("P", speechEvent.SpeechType);
        }

        [Fact]
        public void FloorReservationClearedAndReservedEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""puheenvuorovaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:08:39"",""snro"":740485002},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""laji"":""puheenvuorovaraus"",""aikaleima"":""2019-12-11T16:08:39"",""snro"":740485003,""sijanumero"":1,""paikka"":""50""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""PUHEENVUOROT"",""paatosehdotus_sv"":""Stadsfullmäktige antecknar de förtroendevaldas och tjänsteinnehavarnas redogörelser för bindningar som avses i 84?§ i kommunallagen.\n\n"",""asianumero"":""3"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Lakisääteiset luottamushenkilöiden ja viranhaltijoiden sidonnaisuusilmoitukset"",""snro"":740485001,""asiateksti_sv"":""Förtroendevaldas och tjänsteinnehavares lagstadgade redogörelser för bindningar"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi luottamushenkilöiden ja viranhaltijoiden kuntalain 84 §:n tarkoittamat sidonnaisuusilmoitukset.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var clearedEvent = result.Events[0] as FloorReservationsClearedRoomEventDTO;
            Assert.NotNull(clearedEvent);
            Assert.Equal("3", result.State!.CaseNumber);
            Assert.Equal("0", result.State!.ItemNumber);

            var floorReservation = result.Events[1] as FloorReservationRoomEventDTO;
            Assert.NotNull(floorReservation);
            Assert.Equal(740485003, floorReservation.SequenceNumber);
            Assert.Equal("Koivulaakso Dan /Vas.", floorReservation.PersonFI);
            Assert.Equal("Koivulaakso Dan /Vänst.", floorReservation.PersonSV);
            Assert.Equal(1, floorReservation.Ordinal);
            Assert.Equal("50", floorReservation.Seat);
        }

        [Fact]
        public void PropositoinsEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""ehdotukset"",""ehdotukset"":[{""ehdotusteksti_sv"":""Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården."",""ehdotusteksti"":""Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. "",""tyyppi"":""PON"",""tyyppi-teksti"":""Toivomusponsi"",""hlo_sv"":""Vuorjoki Anna /Vänst."",""hlo"":""Vuorjoki Anna /Vas."",""tyyppi-teksti_sv"":""Hemställningskläm""}],""aikaleima"":""2019-12-11T16:24:24"",""snro"":1685038002},{""puheaika"":0,""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""puhekello"":0,""alkamisaika"":""2019-12-11T16:20:55"",""laji"":""puheenvuoro alkaa"",""aikaleima"":""2019-12-11T16:24:24"",""suunta"":""seis"",""snro"":1685038003,""paikka"":""96"",""pvtyyppi"":""P""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""EHDOTUKSET"",""paatosehdotus_sv"":""Stadsfullmäktige beslutar anteckna bilagan till detta ärende med en utredning om de åtgärder som vidtagits med anledning av utvärderingsberättelsen för år 2018.\n\n"",""asianumero"":""6"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Selvitys vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä"",""snro"":1685038001,""asiateksti_sv"":""Utredning om åtgärderna med anledning av utvärderingsberättelsen för år 2018"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto merkitsee tiedoksi esityslistan liitteenä olevan selvityksen vuoden 2018 arviointikertomuksen johdosta suoritetuista toimenpiteistä.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var propositionsEvent = result.Events[0] as PropositionsRoomEventDTO;
            Assert.NotNull(propositionsEvent);
            Assert.Equal("6", result.State!.CaseNumber);
            Assert.Equal("0", result.State!.ItemNumber);

            Assert.Equal(1685038002, propositionsEvent.SequenceNumber);
            Assert.Equal("Vuorjoki Anna /Vas.", propositionsEvent.Propositions[0].PersonFI);
            Assert.Equal("Vuorjoki Anna /Vänst.", propositionsEvent.Propositions[0].PersonSV);
            Assert.Equal("PON", propositionsEvent.Propositions[0].PropositionType);
            Assert.Equal("Toivomusponsi", propositionsEvent.Propositions[0].PropositionTypeTextFI);
            Assert.Equal("Hemställningskläm", propositionsEvent.Propositions[0].PropositionTypeTextSV);
            Assert.Equal("Valtuusto edellyttää selvittämään mahdollisuutta toteuttaa kattavammin tarkastuslautakunnan vaatimuksia omaishoitoa tukevien palveluiden kehittämiseksi. ", propositionsEvent.Propositions[0].TextFI);
            Assert.Equal("Stadsfullmäktige förutsätter att det utreds om det är möjligt att mer heltäckande tillgodose revisionsnämndens krav för att utveckla de tjänster som stöder närståendevården.", propositionsEvent.Propositions[0].TextSV);
        }

        [Fact]
        public void SpeechTimerEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""puheaikakello"",""aikaleima"":""2019-12-11T16:50:40"",""snro"":3261488002, ""paikka"":""64"", ""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."", ""puheaika"":64,""puhekello"":128,""suunta"":""seis""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""laji"":""repliikkivaraus"",""aikaleima"":""2019-12-11T16:50:40"",""snro"":3261488003,""sijanumero"":1,""paikka"":""12""},{""puheaika"":0,""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""puhekello"":0,""alkamisaika"":""2019-12-11T16:49:49"",""laji"":""puheenvuoro alkaa"",""aikaleima"":""2019-12-11T16:50:40"",""suunta"":""seis"",""snro"":3261488004,""paikka"":""97"",""pvtyyppi"":""P""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""VASTAUSPUHEENVUOROT"",""paatosehdotus_sv"":""Stadsfullmäktige godkänner projektplan för Käpylän peruskoulus Väinöläbyggnad, daterad 11.7.2019, enligt vilken projektet omfattar högst 5 273 m² bruttoyta och maximipriset uppgår till högst 18 400 000 euro exklusive mervärdesskatt på den kostnadsnivå som rådde i april 2019.\n\n"",""asianumero"":""9"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Käpylän peruskoulun Väinölä-rakennuksen perusparannuksen hankesuunnitelma"",""snro"":3261488001,""asiateksti_sv"":""Projektplan för ombyggnad av Väinöläbyggnaden tillhörande Käpylän peruskoulu"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto hyväksyy Käpylän peruskoulun Väinölä-rakennuksen 11.7.2019 päivätyn hankesuunnitelman siten, että hankkeen enimmäislaajuus on 5 273 brm² ja rakentamiskustannusten enimmäishinta on arvonlisäverottomana 18 400 000 euroa huhtikuun 2019 kustannustasossa.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var timerEvent = result.Events[0] as SpeechTimerRoomEventDTO;
            Assert.NotNull(timerEvent);
            Assert.Equal("9", result.State!.CaseNumber);
            Assert.Equal("0", result.State!.ItemNumber);

            Assert.Equal(3261488002, timerEvent.SequenceNumber);
            Assert.Equal("Urho Ulla-Marja /Kok.", timerEvent.PersonFI);
            Assert.Equal("Urho Ulla-Marja /Saml.", timerEvent.PersonSV);
            Assert.Equal("seis", timerEvent.Direction);
            Assert.Equal(64, timerEvent.SpeechTime);
            Assert.Equal(128, timerEvent.SpeechTimer);
            Assert.Equal("64", timerEvent.Seat);
        }

        [Fact]
        public void ReplyReservationEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""repliikkivaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:50:40"",""snro"":3261488002},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""laji"":""repliikkivaraus"",""aikaleima"":""2019-12-11T16:50:40"",""snro"":3261488003,""sijanumero"":1,""paikka"":""12""},{""puheaika"":0,""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""puhekello"":0,""alkamisaika"":""2019-12-11T16:49:49"",""laji"":""puheenvuoro alkaa"",""aikaleima"":""2019-12-11T16:50:40"",""suunta"":""seis"",""snro"":3261488004,""paikka"":""97"",""pvtyyppi"":""P""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""VASTAUSPUHEENVUOROT"",""paatosehdotus_sv"":""Stadsfullmäktige godkänner projektplan för Käpylän peruskoulus Väinöläbyggnad, daterad 11.7.2019, enligt vilken projektet omfattar högst 5 273 m² bruttoyta och maximipriset uppgår till högst 18 400 000 euro exklusive mervärdesskatt på den kostnadsnivå som rådde i april 2019.\n\n"",""asianumero"":""9"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Käpylän peruskoulun Väinölä-rakennuksen perusparannuksen hankesuunnitelma"",""snro"":3261488001,""asiateksti_sv"":""Projektplan för ombyggnad av Väinöläbyggnaden tillhörande Käpylän peruskoulu"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto hyväksyy Käpylän peruskoulun Väinölä-rakennuksen 11.7.2019 päivätyn hankesuunnitelman siten, että hankkeen enimmäislaajuus on 5 273 brm² ja rakentamiskustannusten enimmäishinta on arvonlisäverottomana 18 400 000 euroa huhtikuun 2019 kustannustasossa.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var clearedEvent = result.Events[0] as ReplyReservationsClearedRoomEventDTO;
            Assert.NotNull(clearedEvent);
            Assert.Equal("9", result.State!.CaseNumber);
            Assert.Equal("0", result.State!.ItemNumber);

            var reservation = result.Events[1] as ReplyReservationRoomEventDTO;
            Assert.NotNull(reservation);
            Assert.Equal(3261488003, reservation.SequenceNumber);
            Assert.Equal("Urho Ulla-Marja /Kok.", reservation.PersonFI);
            Assert.Equal("Urho Ulla-Marja /Saml.", reservation.PersonSV);
            Assert.Equal(1, reservation.Ordinal);
            Assert.Equal("12", reservation.Seat);
        }

        [Fact]
        public void FloorReservationAndReplyClearingEvents()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""asia/kohta"",""paatosehdotus_sv"":""Stadsfullmäktige väljer två ledamöter till protokolljusterare och två ledamöter till ersättare för dessa.\n\n"",""asianumero"":""2"",""aikaleima"":""2019-12-11T16:08:09"",""asiateksti"":""Pöytäkirjan tarkastajien valinta"",""snro"":709891002,""asiateksti_sv"":""Val av protokolljusterare"",""paatosehdotus"":""Kaupunginvaltuusto valitsee pöytäkirjantarkastajiksi kaksi valtuutettua ja varatarkastajiksi kaksi valtuutettua.\n\n"",""tunniste"":""2 / Asia"",""kohtanumero"":""0""},{""laji"":""puheenvuorovaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:08:09"",""snro"":709891003},{""laji"":""repliikkivaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:08:09"",""snro"":709891004}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""KOHDANALKU"",""paatosehdotus_sv"":""Stadsfullmäktige väljer två ledamöter till protokolljusterare och två ledamöter till ersättare för dessa.\n\n"",""asianumero"":""2"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Pöytäkirjan tarkastajien valinta"",""snro"":709891001,""asiateksti_sv"":""Val av protokolljusterare"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto valitsee pöytäkirjantarkastajiksi kaksi valtuutettua ja varatarkastajiksi kaksi valtuutettua.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var caseEvent = result.Events[0] as CaseEventRoomDTO;
            Assert.NotNull(caseEvent);
            Assert.Equal("2", caseEvent.CaseNumber);
            Assert.Equal("0", caseEvent.ItemNumber);
            Assert.Equal("2", result.State!.CaseNumber);
            Assert.Equal("0", result.State!.ItemNumber);

            var floorReservations = result.Events[1] as FloorReservationsClearedRoomEventDTO;
            Assert.NotNull(floorReservations);
            Assert.Equal(709891003, floorReservations.SequenceNumber);

            var replyReservations = result.Events[2] as ReplyReservationsClearedRoomEventDTO;
            Assert.NotNull(floorReservations);
            Assert.Equal(709891004, replyReservations.SequenceNumber);
        }

        /// <summary>
        /// "keskustelu alkaa
        /// </summary>
        [Fact]
        public void DiscussionStartsEvent()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""keskustelu alkaa"",""aikaleima"":""2019-12-11T16:07:50"",""snro"":690784002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""KESKUSTELU"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":690784001,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var discussionEvent = result.Events[0] as DiscussionStartsRoomEventDTO;
            Assert.NotNull(discussionEvent);
            Assert.Equal(690784002, discussionEvent.SequenceNumber);
            Assert.Equal(2019, discussionEvent.Timestamp.Year);
            Assert.Equal(12, discussionEvent.Timestamp.Month);
            Assert.Equal(11, discussionEvent.Timestamp.Day);
            Assert.Equal("1", result.State!.CaseNumber);
            Assert.Equal("0", result.State.ItemNumber);
        }

        /// <summary>
        /// "henkilo poistunut"
        /// </summary>
        [Fact]
        public void PersonLeftEvent()
        {
            var json = @"{""lasnaolijat"":{""paikat"":[{""henkilo"":"""",""paikka"":""101""},{""henkilo_sv"":""Sarvilinna Sami"",""henkilo"":""Sarvilinna Sami"",""paikka"":""102""},{""henkilo_sv"":""Sinnemäki Anni (Apri)"",""henkilo"":""Sinnemäki Anni (Apri)"",""paikka"":""103""},{""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""paikka"":""104""},{""henkilo_sv"":""Sevander Tomi (Apri)"",""henkilo"":""Sevander Tomi (Apri)"",""paikka"":""105""},{""henkilo_sv"":""Vesikansa Sanna (Apri)"",""henkilo"":""Vesikansa Sanna (Apri)"",""paikka"":""106""},{""henkilo"":"""",""paikka"":""107""},{""henkilo"":"""",""paikka"":""108""},{""henkilo_sv"":""Kivekäs Otso /Gröna"",""henkilo"":""Kivekäs Otso /Vihr."",""paikka"":""91""},{""henkilo_sv"":""Månsson Björn /SFP"",""henkilo"":""Månsson Björn /SFP"",""paikka"":""1""},{""henkilo_sv"":""Koskinen Kauko /Saml."",""henkilo"":""Koskinen Kauko /Kok."",""paikka"":""2""},{""henkilo_sv"":""Bogomoloff Harry /Saml."",""henkilo"":""Bogomoloff Harry /Kok."",""paikka"":""3""},{""henkilo_sv"":""Sazonov Daniel /Saml."",""henkilo"":""Sazonov Daniel /Kok."",""paikka"":""4""},{""henkilo_sv"":""Hernberg Kaisa /Gröna"",""henkilo"":""Hernberg Kaisa /Vihr."",""paikka"":""5""},{""henkilo_sv"":""Soininvaara Osmo /Gröna"",""henkilo"":""Soininvaara Osmo /Vihr."",""paikka"":""6""},{""henkilo_sv"":""Sinnemäki Anni /Gröna"",""henkilo"":""Sinnemäki Anni /Vihr."",""paikka"":""7""},{""henkilo_sv"":""Heinäluoma Eveliina /SDP"",""henkilo"":""Heinäluoma Eveliina /SDP"",""paikka"":""8""},{""henkilo_sv"":""Taipale Ilkka /SDP"",""henkilo"":""Taipale Ilkka /SDP"",""paikka"":""9""},{""henkilo_sv"":""Vuorjoki Anna /Vänst."",""henkilo"":""Vuorjoki Anna /Vas."",""paikka"":""10""},{""henkilo_sv"":""Biaudet Eva /SFP"",""henkilo"":""Biaudet Eva /SFP"",""paikka"":""11""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""paikka"":""12""},{""henkilo_sv"":""Hakola Juha /Saml."",""henkilo"":""Hakola Juha /Kok."",""paikka"":""13""},{""henkilo_sv"":""Klemetti Tapio /Saml."",""henkilo"":""Klemetti Tapio /Kok."",""paikka"":""14""},{""henkilo_sv"":""Kari Emma /Gröna"",""henkilo"":""Kari Emma /Vihr."",""paikka"":""15""},{""henkilo_sv"":""Holopainen Mari /Gröna"",""henkilo"":""Holopainen Mari /Vihr."",""paikka"":""16""},{""henkilo_sv"":""Moisio Elina /Gröna"",""henkilo"":""Moisio Elina /Vihr."",""paikka"":""17""},{""henkilo_sv"":""Anttila Maija /SDP"",""henkilo"":""Anttila Maija /SDP"",""paikka"":""18""},{""henkilo_sv"":""Wallgren Thomas /SDP"",""henkilo"":""Wallgren Thomas /SDP"",""paikka"":""19""},{""henkilo_sv"":""Arhinmäki Paavo /Vänst."",""henkilo"":""Arhinmäki Paavo /Vas."",""paikka"":""20""},{""henkilo_sv"":""Rantala Marcus /SFP"",""henkilo"":""Rantala Marcus /SFP"",""paikka"":""21""},{""henkilo_sv"":""Asko-Seljavaara Sirpa /Saml."",""henkilo"":""Asko-Seljavaara Sirpa /Kok."",""paikka"":""22""},{""henkilo_sv"":""Karhuvaara Arja /Saml."",""henkilo"":""Karhuvaara Arja /Kok."",""paikka"":""23""},{""henkilo_sv"":""Rautava Risto /Saml."",""henkilo"":""Rautava Risto /Kok."",""paikka"":""24""},{""henkilo_sv"":""Raatikainen Mika /Sannf."",""henkilo"":""Raatikainen Mika /PerusS"",""paikka"":""25""},{""henkilo_sv"":""Rantanen Tuomas /Gröna"",""henkilo"":""Rantanen Tuomas /Vihr."",""paikka"":""26""},{""henkilo_sv"":""Stranius Leo /Gröna"",""henkilo"":""Stranius Leo /Vihr."",""paikka"":""27""},{""henkilo_sv"":""Paavolainen Sara /SDP"",""henkilo"":""Paavolainen Sara /SDP"",""paikka"":""28""},{""henkilo_sv"":""Sevander Tomi /SDP"",""henkilo"":""Sevander Tomi /SDP"",""paikka"":""29""},{""henkilo_sv"":""Haglund Mia /Vänst."",""henkilo"":""Haglund Mia /Vas."",""paikka"":""30""},{""henkilo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""henkilo"":""Borgarsdóttir Sandelin Silja /SFP"",""paikka"":""31""},{""henkilo_sv"":""Varjokari Laura /Saml."",""henkilo"":""Varjokari Laura /Kok."",""paikka"":""32""},{""henkilo_sv"":""Koulumies Terhi /Saml."",""henkilo"":""Koulumies Terhi /Kok."",""paikka"":""33""},{""henkilo_sv"":""Pelkonen Jaana /Saml."",""henkilo"":""Pelkonen Jaana /Kok."",""paikka"":""34""},{""henkilo_sv"":""Turkkila Matias /Sannf."",""henkilo"":""Turkkila Matias /PerusS"",""paikka"":""35""},{""henkilo_sv"":""Hamid Jasmin /Gröna"",""henkilo"":""Hamid Jasmin /Vihr."",""paikka"":""36""},{""henkilo_sv"":""Vesikansa Sanna /Gröna"",""henkilo"":""Vesikansa Sanna /Vihr."",""paikka"":""37""},{""henkilo_sv"":""Jalovaara Ville /SDP"",""henkilo"":""Jalovaara Ville /SDP"",""paikka"":""38""},{""henkilo_sv"":""Torsti Pilvi /SDP"",""henkilo"":""Torsti Pilvi /SDP"",""paikka"":""39""},{""henkilo_sv"":""Honkasalo Veronika /Vänst."",""henkilo"":""Honkasalo Veronika /Vas."",""paikka"":""40""},{""henkilo_sv"":""Finne-Elonen Laura /SFP"",""henkilo"":""Finne-Elonen Laura /SFP"",""paikka"":""41""},{""henkilo_sv"":""Rydman Wille /Saml."",""henkilo"":""Rydman Wille /Kok."",""paikka"":""42""},{""henkilo_sv"":""Pakarinen Pia /Saml."",""henkilo"":""Pakarinen Pia /Kok."",""paikka"":""43""},{""henkilo_sv"":""Peltokorpi Terhi /Cent."",""henkilo"":""Peltokorpi Terhi /Kesk."",""paikka"":""44""},{""henkilo_sv"":""Rantanen Mari /Sannf."",""henkilo"":""Rantanen Mari /PerusS"",""paikka"":""45""},{""henkilo_sv"":""Juva Kati /Gröna"",""henkilo"":""Juva Kati /Vihr."",""paikka"":""46""},{""henkilo_sv"":""Sydänmaa Johanna /Gröna"",""henkilo"":""Sydänmaa Johanna /Vihr."",""paikka"":""47""},{""henkilo_sv"":""Järvinen Jukka /SDP"",""henkilo"":""Järvinen Jukka /SDP"",""paikka"":""48""},{""henkilo_sv"":""Vepsä Sinikka /SDP"",""henkilo"":""Vepsä Sinikka /SDP"",""paikka"":""49""},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""paikka"":""50""},{""henkilo_sv"":""Laaksonen Heimo /Saml."",""henkilo"":""Laaksonen Heimo /Kok."",""paikka"":""51""},{""henkilo_sv"":""Kaleva Atte /Saml."",""henkilo"":""Kaleva Atte /Kok."",""paikka"":""52""},{""henkilo_sv"":""Pasterstein Dennis /Saml."",""henkilo"":""Pasterstein Dennis /Kok."",""paikka"":""53""},{""henkilo_sv"":""Kolbe Laura /Cent."",""henkilo"":""Kolbe Laura /Kesk."",""paikka"":""54""},{""henkilo_sv"":""Kopra Pia /Sannf."",""henkilo"":""Kopra Pia /PerusS"",""paikka"":""55""},{""henkilo_sv"":""Oskala Hannu /Gröna"",""henkilo"":""Oskala Hannu /Vihr."",""paikka"":""56""},{""henkilo_sv"":""Yanar Ozan /Gröna"",""henkilo"":""Yanar Ozan /Vihr."",""paikka"":""57""},{""henkilo"":"""",""paikka"":""58""},{""henkilo_sv"":""Laisaari Johanna /SDP"",""henkilo"":""Laisaari Johanna /SDP"",""paikka"":""59""},{""henkilo_sv"":""Muttilainen Sami /Vänst."",""henkilo"":""Muttilainen Sami /Vas."",""paikka"":""60""},{""henkilo_sv"":""Meri Otto /Saml."",""henkilo"":""Meri Otto /Kok."",""paikka"":""61""},{""henkilo_sv"":""Nygård Mia /Saml."",""henkilo"":""Nygård Mia /Kok."",""paikka"":""62""},{""henkilo_sv"":""Pajunen Jenni /Saml."",""henkilo"":""Pajunen Jenni /Kok."",""paikka"":""63""},{""henkilo_sv"":""Ebeling Mika /KD"",""henkilo"":""Ebeling Mika /KD"",""paikka"":""64""},{""henkilo_sv"":""Terho Sampo /Blå"",""henkilo"":""Terho Sampo /Sin"",""paikka"":""65""},{""henkilo_sv"":""Ohisalo Maria /Gröna"",""henkilo"":""Ohisalo Maria /Vihr."",""paikka"":""66""},{""henkilo_sv"":""Alametsä Alviina /Gröna"",""henkilo"":""Alametsä Alviina /Vihr."",""paikka"":""67""},{""henkilo_sv"":""Vanhanen Reetta /Gröna"",""henkilo"":""Vanhanen Reetta /Vihr."",""paikka"":""68""},{""henkilo_sv"":""Puhakka Sirpa /Vänst."",""henkilo"":""Puhakka Sirpa /Vas."",""paikka"":""69""},{""henkilo_sv"":""Hagman Sandra /Vänst."",""henkilo"":""Hagman Sandra /Vas."",""paikka"":""70""},{""henkilo_sv"":""Niskanen Dani /Saml."",""henkilo"":""Niskanen Dani /Kok."",""paikka"":""71""},{""henkilo_sv"":""Apter Ted /Saml."",""henkilo"":""Apter Ted /Kok."",""paikka"":""72""},{""henkilo_sv"":""Parpala Matti /Saml."",""henkilo"":""Parpala Matti /Kok."",""paikka"":""73""},{""henkilo_sv"":""Väyrynen Paavo /SH"",""henkilo"":""Väyrynen Paavo /TH"",""paikka"":""74""},{""henkilo_sv"":""Niinistö Jussi /Blå"",""henkilo"":""Niinistö Jussi /Sin"",""paikka"":""75""},{""henkilo_sv"":""Diarra Fatim /Gröna"",""henkilo"":""Diarra Fatim /Vihr."",""paikka"":""76""},{""henkilo_sv"":""Harjanne Atte /Gröna"",""henkilo"":""Harjanne Atte /Vihr."",""paikka"":""77""},{""henkilo_sv"":""Silvo Satu /Gröna"",""henkilo"":""Silvo Satu /Vihr."",""paikka"":""78""},{""henkilo_sv"":""Korkkula Vesa /Vänst."",""henkilo"":""Korkkula Vesa /Vas."",""paikka"":""79""},{""henkilo_sv"":""Alanen Outi /Vänst."",""henkilo"":""Alanen Outi /Vas."",""paikka"":""80""},{""henkilo"":"""",""paikka"":""81""},{""henkilo_sv"":""Saxberg Mirita /Liik"",""henkilo"":""Saxberg Mirita /Liik"",""paikka"":""82""},{""henkilo_sv"":""Pennanen Petrus /ÖP"",""henkilo"":""Pennanen Petrus /AP"",""paikka"":""83""},{""henkilo_sv"":""Aro Katju /FP"",""henkilo"":""Aro Katju /FP"",""paikka"":""84""},{""henkilo"":"""",""paikka"":""85""}],""aikaleima"":""2019-12-11T16:51:59"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":3340967003},""tapahtumalista"":{""tapahtumat"":[{""henkilo_sv"":""Arajärvi Pentti /SDP"",""henkilo"":""Arajärvi Pentti /SDP"",""laji"":""henkilo poistunut"",""aikaleima"":""2019-12-11T16:52:00"",""snro"":3340967002,""paikka"":""28""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""HLO_POISTUU"",""paatosehdotus_sv"":""Stadsfullmäktige godkänner projektplan för Käpylän peruskoulus Väinöläbyggnad, daterad 11.7.2019, enligt vilken projektet omfattar högst 5 273 m² bruttoyta och maximipriset uppgår till högst 18 400 000 euro exklusive mervärdesskatt på den kostnadsnivå som rådde i april 2019.\n\n"",""asianumero"":""9"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Käpylän peruskoulun Väinölä-rakennuksen perusparannuksen hankesuunnitelma"",""snro"":3340967001,""asiateksti_sv"":""Projektplan för ombyggnad av Väinöläbyggnaden tillhörande Käpylän peruskoulu"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto hyväksyy Käpylän peruskoulun Väinölä-rakennuksen 11.7.2019 päivätyn hankesuunnitelman siten, että hankkeen enimmäislaajuus on 5 273 brm² ja rakentamiskustannusten enimmäishinta on arvonlisäverottomana 18 400 000 euroa huhtikuun 2019 kustannustasossa.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var personEvent = result.Events[0] as PersonLeftRoomEventDTO;
            Assert.NotNull(personEvent);
            Assert.Equal("Arajärvi Pentti /SDP", personEvent.PersonFI);
            Assert.Equal("Arajärvi Pentti /SDP", personEvent.PersonSV);
            Assert.Equal("28", personEvent.Seat);
            Assert.Equal(3340967002, personEvent.SequenceNumber);
            Assert.Equal("11/12/2019 16.52.00", personEvent.Timestamp.ToString("G"));
            Assert.Equal("9", result.State!.CaseNumber);
            Assert.Equal("0", result.State.ItemNumber);
        }

        /// <summary>
        /// "henkilo saapuu"
        /// </summary>
        [Fact]
        public void PersonArrivedEvent()
        {
            var json = @"{""lasnaolijat"":{""paikat"":[{""henkilo"":"""",""paikka"":""101""},{""henkilo_sv"":""Sarvilinna Sami"",""henkilo"":""Sarvilinna Sami"",""paikka"":""102""},{""henkilo_sv"":""Sinnemäki Anni (Apri)"",""henkilo"":""Sinnemäki Anni (Apri)"",""paikka"":""103""},{""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""paikka"":""104""},{""henkilo_sv"":""Sevander Tomi (Apri)"",""henkilo"":""Sevander Tomi (Apri)"",""paikka"":""105""},{""henkilo_sv"":""Vesikansa Sanna (Apri)"",""henkilo"":""Vesikansa Sanna (Apri)"",""paikka"":""106""},{""henkilo"":"""",""paikka"":""107""},{""henkilo"":"""",""paikka"":""108""},{""henkilo_sv"":""Kivekäs Otso /Gröna"",""henkilo"":""Kivekäs Otso /Vihr."",""paikka"":""91""},{""henkilo_sv"":""Månsson Björn /SFP"",""henkilo"":""Månsson Björn /SFP"",""paikka"":""1""},{""henkilo_sv"":""Koskinen Kauko /Saml."",""henkilo"":""Koskinen Kauko /Kok."",""paikka"":""2""},{""henkilo_sv"":""Bogomoloff Harry /Saml."",""henkilo"":""Bogomoloff Harry /Kok."",""paikka"":""3""},{""henkilo_sv"":""Sazonov Daniel /Saml."",""henkilo"":""Sazonov Daniel /Kok."",""paikka"":""4""},{""henkilo_sv"":""Hernberg Kaisa /Gröna"",""henkilo"":""Hernberg Kaisa /Vihr."",""paikka"":""5""},{""henkilo_sv"":""Soininvaara Osmo /Gröna"",""henkilo"":""Soininvaara Osmo /Vihr."",""paikka"":""6""},{""henkilo_sv"":""Sinnemäki Anni /Gröna"",""henkilo"":""Sinnemäki Anni /Vihr."",""paikka"":""7""},{""henkilo_sv"":""Heinäluoma Eveliina /SDP"",""henkilo"":""Heinäluoma Eveliina /SDP"",""paikka"":""8""},{""henkilo_sv"":""Taipale Ilkka /SDP"",""henkilo"":""Taipale Ilkka /SDP"",""paikka"":""9""},{""henkilo_sv"":""Vuorjoki Anna /Vänst."",""henkilo"":""Vuorjoki Anna /Vas."",""paikka"":""10""},{""henkilo_sv"":""Biaudet Eva /SFP"",""henkilo"":""Biaudet Eva /SFP"",""paikka"":""11""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""paikka"":""12""},{""henkilo_sv"":""Hakola Juha /Saml."",""henkilo"":""Hakola Juha /Kok."",""paikka"":""13""},{""henkilo_sv"":""Klemetti Tapio /Saml."",""henkilo"":""Klemetti Tapio /Kok."",""paikka"":""14""},{""henkilo_sv"":""Kari Emma /Gröna"",""henkilo"":""Kari Emma /Vihr."",""paikka"":""15""},{""henkilo_sv"":""Holopainen Mari /Gröna"",""henkilo"":""Holopainen Mari /Vihr."",""paikka"":""16""},{""henkilo_sv"":""Moisio Elina /Gröna"",""henkilo"":""Moisio Elina /Vihr."",""paikka"":""17""},{""henkilo"":"""",""paikka"":""18""},{""henkilo_sv"":""Wallgren Thomas /SDP"",""henkilo"":""Wallgren Thomas /SDP"",""paikka"":""19""},{""henkilo_sv"":""Arhinmäki Paavo /Vänst."",""henkilo"":""Arhinmäki Paavo /Vas."",""paikka"":""20""},{""henkilo_sv"":""Rantala Marcus /SFP"",""henkilo"":""Rantala Marcus /SFP"",""paikka"":""21""},{""henkilo_sv"":""Asko-Seljavaara Sirpa /Saml."",""henkilo"":""Asko-Seljavaara Sirpa /Kok."",""paikka"":""22""},{""henkilo_sv"":""Karhuvaara Arja /Saml."",""henkilo"":""Karhuvaara Arja /Kok."",""paikka"":""23""},{""henkilo_sv"":""Rautava Risto /Saml."",""henkilo"":""Rautava Risto /Kok."",""paikka"":""24""},{""henkilo_sv"":""Raatikainen Mika /Sannf."",""henkilo"":""Raatikainen Mika /PerusS"",""paikka"":""25""},{""henkilo_sv"":""Rantanen Tuomas /Gröna"",""henkilo"":""Rantanen Tuomas /Vihr."",""paikka"":""26""},{""henkilo_sv"":""Stranius Leo /Gröna"",""henkilo"":""Stranius Leo /Vihr."",""paikka"":""27""},{""henkilo_sv"":""Arajärvi Pentti /SDP"",""henkilo"":""Arajärvi Pentti /SDP"",""paikka"":""28""},{""henkilo_sv"":""Sevander Tomi /SDP"",""henkilo"":""Sevander Tomi /SDP"",""paikka"":""29""},{""henkilo_sv"":""Haglund Mia /Vänst."",""henkilo"":""Haglund Mia /Vas."",""paikka"":""30""},{""henkilo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""henkilo"":""Borgarsdóttir Sandelin Silja /SFP"",""paikka"":""31""},{""henkilo_sv"":""Varjokari Laura /Saml."",""henkilo"":""Varjokari Laura /Kok."",""paikka"":""32""},{""henkilo_sv"":""Koulumies Terhi /Saml."",""henkilo"":""Koulumies Terhi /Kok."",""paikka"":""33""},{""henkilo_sv"":""Pelkonen Jaana /Saml."",""henkilo"":""Pelkonen Jaana /Kok."",""paikka"":""34""},{""henkilo_sv"":""Turkkila Matias /Sannf."",""henkilo"":""Turkkila Matias /PerusS"",""paikka"":""35""},{""henkilo_sv"":""Hamid Jasmin /Gröna"",""henkilo"":""Hamid Jasmin /Vihr."",""paikka"":""36""},{""henkilo_sv"":""Vesikansa Sanna /Gröna"",""henkilo"":""Vesikansa Sanna /Vihr."",""paikka"":""37""},{""henkilo_sv"":""Jalovaara Ville /SDP"",""henkilo"":""Jalovaara Ville /SDP"",""paikka"":""38""},{""henkilo_sv"":""Torsti Pilvi /SDP"",""henkilo"":""Torsti Pilvi /SDP"",""paikka"":""39""},{""henkilo_sv"":""Honkasalo Veronika /Vänst."",""henkilo"":""Honkasalo Veronika /Vas."",""paikka"":""40""},{""henkilo_sv"":""Finne-Elonen Laura /SFP"",""henkilo"":""Finne-Elonen Laura /SFP"",""paikka"":""41""},{""henkilo_sv"":""Rydman Wille /Saml."",""henkilo"":""Rydman Wille /Kok."",""paikka"":""42""},{""henkilo_sv"":""Pakarinen Pia /Saml."",""henkilo"":""Pakarinen Pia /Kok."",""paikka"":""43""},{""henkilo_sv"":""Peltokorpi Terhi /Cent."",""henkilo"":""Peltokorpi Terhi /Kesk."",""paikka"":""44""},{""henkilo_sv"":""Rantanen Mari /Sannf."",""henkilo"":""Rantanen Mari /PerusS"",""paikka"":""45""},{""henkilo_sv"":""Juva Kati /Gröna"",""henkilo"":""Juva Kati /Vihr."",""paikka"":""46""},{""henkilo_sv"":""Sydänmaa Johanna /Gröna"",""henkilo"":""Sydänmaa Johanna /Vihr."",""paikka"":""47""},{""henkilo_sv"":""Järvinen Jukka /SDP"",""henkilo"":""Järvinen Jukka /SDP"",""paikka"":""48""},{""henkilo_sv"":""Vepsä Sinikka /SDP"",""henkilo"":""Vepsä Sinikka /SDP"",""paikka"":""49""},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""paikka"":""50""},{""henkilo_sv"":""Laaksonen Heimo /Saml."",""henkilo"":""Laaksonen Heimo /Kok."",""paikka"":""51""},{""henkilo_sv"":""Kaleva Atte /Saml."",""henkilo"":""Kaleva Atte /Kok."",""paikka"":""52""},{""henkilo_sv"":""Pasterstein Dennis /Saml."",""henkilo"":""Pasterstein Dennis /Kok."",""paikka"":""53""},{""henkilo_sv"":""Kolbe Laura /Cent."",""henkilo"":""Kolbe Laura /Kesk."",""paikka"":""54""},{""henkilo_sv"":""Kopra Pia /Sannf."",""henkilo"":""Kopra Pia /PerusS"",""paikka"":""55""},{""henkilo_sv"":""Oskala Hannu /Gröna"",""henkilo"":""Oskala Hannu /Vihr."",""paikka"":""56""},{""henkilo_sv"":""Yanar Ozan /Gröna"",""henkilo"":""Yanar Ozan /Vihr."",""paikka"":""57""},{""henkilo"":"""",""paikka"":""58""},{""henkilo_sv"":""Laisaari Johanna /SDP"",""henkilo"":""Laisaari Johanna /SDP"",""paikka"":""59""},{""henkilo_sv"":""Muttilainen Sami /Vänst."",""henkilo"":""Muttilainen Sami /Vas."",""paikka"":""60""},{""henkilo_sv"":""Meri Otto /Saml."",""henkilo"":""Meri Otto /Kok."",""paikka"":""61""},{""henkilo_sv"":""Nygård Mia /Saml."",""henkilo"":""Nygård Mia /Kok."",""paikka"":""62""},{""henkilo_sv"":""Pajunen Jenni /Saml."",""henkilo"":""Pajunen Jenni /Kok."",""paikka"":""63""},{""henkilo_sv"":""Ebeling Mika /KD"",""henkilo"":""Ebeling Mika /KD"",""paikka"":""64""},{""henkilo_sv"":""Terho Sampo /Blå"",""henkilo"":""Terho Sampo /Sin"",""paikka"":""65""},{""henkilo_sv"":""Ohisalo Maria /Gröna"",""henkilo"":""Ohisalo Maria /Vihr."",""paikka"":""66""},{""henkilo_sv"":""Alametsä Alviina /Gröna"",""henkilo"":""Alametsä Alviina /Vihr."",""paikka"":""67""},{""henkilo_sv"":""Vanhanen Reetta /Gröna"",""henkilo"":""Vanhanen Reetta /Vihr."",""paikka"":""68""},{""henkilo_sv"":""Puhakka Sirpa /Vänst."",""henkilo"":""Puhakka Sirpa /Vas."",""paikka"":""69""},{""henkilo_sv"":""Hagman Sandra /Vänst."",""henkilo"":""Hagman Sandra /Vas."",""paikka"":""70""},{""henkilo_sv"":""Niskanen Dani /Saml."",""henkilo"":""Niskanen Dani /Kok."",""paikka"":""71""},{""henkilo_sv"":""Apter Ted /Saml."",""henkilo"":""Apter Ted /Kok."",""paikka"":""72""},{""henkilo_sv"":""Parpala Matti /Saml."",""henkilo"":""Parpala Matti /Kok."",""paikka"":""73""},{""henkilo_sv"":""Väyrynen Paavo /SH"",""henkilo"":""Väyrynen Paavo /TH"",""paikka"":""74""},{""henkilo_sv"":""Niinistö Jussi /Blå"",""henkilo"":""Niinistö Jussi /Sin"",""paikka"":""75""},{""henkilo"":"""",""paikka"":""76""},{""henkilo_sv"":""Harjanne Atte /Gröna"",""henkilo"":""Harjanne Atte /Vihr."",""paikka"":""77""},{""henkilo_sv"":""Silvo Satu /Gröna"",""henkilo"":""Silvo Satu /Vihr."",""paikka"":""78""},{""henkilo_sv"":""Korkkula Vesa /Vänst."",""henkilo"":""Korkkula Vesa /Vas."",""paikka"":""79""},{""henkilo_sv"":""Alanen Outi /Vänst."",""henkilo"":""Alanen Outi /Vas."",""paikka"":""80""},{""henkilo"":"""",""paikka"":""81""},{""henkilo_sv"":""Saxberg Mirita /Liik"",""henkilo"":""Saxberg Mirita /Liik"",""paikka"":""82""},{""henkilo_sv"":""Pennanen Petrus /ÖP"",""henkilo"":""Pennanen Petrus /AP"",""paikka"":""83""},{""henkilo_sv"":""Aro Katju /FP"",""henkilo"":""Aro Katju /FP"",""paikka"":""84""},{""henkilo"":"""",""paikka"":""85""}],""aikaleima"":""2019-12-11T16:07:35"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":676489003},""tapahtumalista"":{""tapahtumat"":[{""henkilo_sv"":""Alametsä Alviina /Gröna"",""henkilo"":""Alametsä Alviina /Vihr."",""laji"":""henkilo saapunut"",""aikaleima"":""2019-12-11T16:07:35"",""snro"":676489002,""paikka"":""67""}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""HLO_SAAPUU"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":676489001,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var personEvent = result.Events[0] as PersonArrivedRoomEventDTO;
            Assert.NotNull(personEvent);
            Assert.Equal("Alametsä Alviina /Vihr.", personEvent.PersonFI);
            Assert.Equal("Alametsä Alviina /Gröna", personEvent.PersonSV);
            Assert.Equal("67", personEvent.Seat);
            Assert.Equal(676489002, personEvent.SequenceNumber);
            Assert.Equal(2019, personEvent.Timestamp.Year);
            Assert.Equal(12, personEvent.Timestamp.Month);
            Assert.Equal(11, personEvent.Timestamp.Day);
            Assert.Equal("1", result.State!.CaseNumber);
            Assert.Equal("0", result.State.ItemNumber);
        }

        /// <summary>
        /// "nimenhuuto alkaa"
        /// </summary>
        [Fact]
        public void RollCallStartsEvent()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""nimenhuuto alkaa"",""aikaleima"":""2019-12-11T16:07:04"",""snro"":644901002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""NHALKAA"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":644901001,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""tila"":""nimenhuuto kaynnissa"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var rollCallEvent = result.Events[0] as RollCallStartsRoomEventDTO;
            Assert.NotNull(rollCallEvent);
            Assert.Equal(644901002, rollCallEvent.SequenceNumber);
            Assert.Equal(2019, rollCallEvent.Timestamp.Year);
            Assert.Equal(12, rollCallEvent.Timestamp.Month);
            Assert.Equal(11, rollCallEvent.Timestamp.Day);
            Assert.Equal("1", result.State!.CaseNumber);
            Assert.Equal("0", result.State.ItemNumber);
        }

        /// <summary>
        /// "nimenhuuto paattynyt"
        /// </summary>
        [Fact]
        public void RollCallEndsEvent()
        {
            var json = @"{""lasnaolijat"":{""paikat"":[{""henkilo"":"""",""paikka"":""101""},{""henkilo_sv"":""Sarvilinna Sami"",""henkilo"":""Sarvilinna Sami"",""paikka"":""102""},{""henkilo_sv"":""Sinnemäki Anni (Apri)"",""henkilo"":""Sinnemäki Anni (Apri)"",""paikka"":""103""},{""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""paikka"":""104""},{""henkilo_sv"":""Sevander Tomi (Apri)"",""henkilo"":""Sevander Tomi (Apri)"",""paikka"":""105""},{""henkilo_sv"":""Vesikansa Sanna (Apri)"",""henkilo"":""Vesikansa Sanna (Apri)"",""paikka"":""106""},{""henkilo"":"""",""paikka"":""107""},{""henkilo"":"""",""paikka"":""108""},{""henkilo_sv"":""Kivekäs Otso /Gröna"",""henkilo"":""Kivekäs Otso /Vihr."",""paikka"":""91""},{""henkilo_sv"":""Månsson Björn /SFP"",""henkilo"":""Månsson Björn /SFP"",""paikka"":""1""},{""henkilo_sv"":""Koskinen Kauko /Saml."",""henkilo"":""Koskinen Kauko /Kok."",""paikka"":""2""},{""henkilo_sv"":""Bogomoloff Harry /Saml."",""henkilo"":""Bogomoloff Harry /Kok."",""paikka"":""3""},{""henkilo_sv"":""Sazonov Daniel /Saml."",""henkilo"":""Sazonov Daniel /Kok."",""paikka"":""4""},{""henkilo_sv"":""Hernberg Kaisa /Gröna"",""henkilo"":""Hernberg Kaisa /Vihr."",""paikka"":""5""},{""henkilo_sv"":""Soininvaara Osmo /Gröna"",""henkilo"":""Soininvaara Osmo /Vihr."",""paikka"":""6""},{""henkilo_sv"":""Sinnemäki Anni /Gröna"",""henkilo"":""Sinnemäki Anni /Vihr."",""paikka"":""7""},{""henkilo_sv"":""Heinäluoma Eveliina /SDP"",""henkilo"":""Heinäluoma Eveliina /SDP"",""paikka"":""8""},{""henkilo_sv"":""Taipale Ilkka /SDP"",""henkilo"":""Taipale Ilkka /SDP"",""paikka"":""9""},{""henkilo_sv"":""Vuorjoki Anna /Vänst."",""henkilo"":""Vuorjoki Anna /Vas."",""paikka"":""10""},{""henkilo_sv"":""Biaudet Eva /SFP"",""henkilo"":""Biaudet Eva /SFP"",""paikka"":""11""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""paikka"":""12""},{""henkilo_sv"":""Hakola Juha /Saml."",""henkilo"":""Hakola Juha /Kok."",""paikka"":""13""},{""henkilo_sv"":""Klemetti Tapio /Saml."",""henkilo"":""Klemetti Tapio /Kok."",""paikka"":""14""},{""henkilo_sv"":""Kari Emma /Gröna"",""henkilo"":""Kari Emma /Vihr."",""paikka"":""15""},{""henkilo_sv"":""Holopainen Mari /Gröna"",""henkilo"":""Holopainen Mari /Vihr."",""paikka"":""16""},{""henkilo_sv"":""Moisio Elina /Gröna"",""henkilo"":""Moisio Elina /Vihr."",""paikka"":""17""},{""henkilo"":"""",""paikka"":""18""},{""henkilo_sv"":""Wallgren Thomas /SDP"",""henkilo"":""Wallgren Thomas /SDP"",""paikka"":""19""},{""henkilo_sv"":""Arhinmäki Paavo /Vänst."",""henkilo"":""Arhinmäki Paavo /Vas."",""paikka"":""20""},{""henkilo_sv"":""Rantala Marcus /SFP"",""henkilo"":""Rantala Marcus /SFP"",""paikka"":""21""},{""henkilo_sv"":""Asko-Seljavaara Sirpa /Saml."",""henkilo"":""Asko-Seljavaara Sirpa /Kok."",""paikka"":""22""},{""henkilo_sv"":""Karhuvaara Arja /Saml."",""henkilo"":""Karhuvaara Arja /Kok."",""paikka"":""23""},{""henkilo_sv"":""Rautava Risto /Saml."",""henkilo"":""Rautava Risto /Kok."",""paikka"":""24""},{""henkilo_sv"":""Raatikainen Mika /Sannf."",""henkilo"":""Raatikainen Mika /PerusS"",""paikka"":""25""},{""henkilo_sv"":""Rantanen Tuomas /Gröna"",""henkilo"":""Rantanen Tuomas /Vihr."",""paikka"":""26""},{""henkilo_sv"":""Stranius Leo /Gröna"",""henkilo"":""Stranius Leo /Vihr."",""paikka"":""27""},{""henkilo_sv"":""Arajärvi Pentti /SDP"",""henkilo"":""Arajärvi Pentti /SDP"",""paikka"":""28""},{""henkilo_sv"":""Sevander Tomi /SDP"",""henkilo"":""Sevander Tomi /SDP"",""paikka"":""29""},{""henkilo_sv"":""Haglund Mia /Vänst."",""henkilo"":""Haglund Mia /Vas."",""paikka"":""30""},{""henkilo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""henkilo"":""Borgarsdóttir Sandelin Silja /SFP"",""paikka"":""31""},{""henkilo_sv"":""Varjokari Laura /Saml."",""henkilo"":""Varjokari Laura /Kok."",""paikka"":""32""},{""henkilo_sv"":""Koulumies Terhi /Saml."",""henkilo"":""Koulumies Terhi /Kok."",""paikka"":""33""},{""henkilo_sv"":""Pelkonen Jaana /Saml."",""henkilo"":""Pelkonen Jaana /Kok."",""paikka"":""34""},{""henkilo_sv"":""Turkkila Matias /Sannf."",""henkilo"":""Turkkila Matias /PerusS"",""paikka"":""35""},{""henkilo_sv"":""Hamid Jasmin /Gröna"",""henkilo"":""Hamid Jasmin /Vihr."",""paikka"":""36""},{""henkilo_sv"":""Vesikansa Sanna /Gröna"",""henkilo"":""Vesikansa Sanna /Vihr."",""paikka"":""37""},{""henkilo_sv"":""Jalovaara Ville /SDP"",""henkilo"":""Jalovaara Ville /SDP"",""paikka"":""38""},{""henkilo_sv"":""Torsti Pilvi /SDP"",""henkilo"":""Torsti Pilvi /SDP"",""paikka"":""39""},{""henkilo_sv"":""Honkasalo Veronika /Vänst."",""henkilo"":""Honkasalo Veronika /Vas."",""paikka"":""40""},{""henkilo_sv"":""Finne-Elonen Laura /SFP"",""henkilo"":""Finne-Elonen Laura /SFP"",""paikka"":""41""},{""henkilo_sv"":""Rydman Wille /Saml."",""henkilo"":""Rydman Wille /Kok."",""paikka"":""42""},{""henkilo_sv"":""Pakarinen Pia /Saml."",""henkilo"":""Pakarinen Pia /Kok."",""paikka"":""43""},{""henkilo_sv"":""Peltokorpi Terhi /Cent."",""henkilo"":""Peltokorpi Terhi /Kesk."",""paikka"":""44""},{""henkilo_sv"":""Rantanen Mari /Sannf."",""henkilo"":""Rantanen Mari /PerusS"",""paikka"":""45""},{""henkilo_sv"":""Juva Kati /Gröna"",""henkilo"":""Juva Kati /Vihr."",""paikka"":""46""},{""henkilo_sv"":""Sydänmaa Johanna /Gröna"",""henkilo"":""Sydänmaa Johanna /Vihr."",""paikka"":""47""},{""henkilo_sv"":""Järvinen Jukka /SDP"",""henkilo"":""Järvinen Jukka /SDP"",""paikka"":""48""},{""henkilo_sv"":""Vepsä Sinikka /SDP"",""henkilo"":""Vepsä Sinikka /SDP"",""paikka"":""49""},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""paikka"":""50""},{""henkilo_sv"":""Laaksonen Heimo /Saml."",""henkilo"":""Laaksonen Heimo /Kok."",""paikka"":""51""},{""henkilo_sv"":""Kaleva Atte /Saml."",""henkilo"":""Kaleva Atte /Kok."",""paikka"":""52""},{""henkilo_sv"":""Pasterstein Dennis /Saml."",""henkilo"":""Pasterstein Dennis /Kok."",""paikka"":""53""},{""henkilo_sv"":""Kolbe Laura /Cent."",""henkilo"":""Kolbe Laura /Kesk."",""paikka"":""54""},{""henkilo_sv"":""Kopra Pia /Sannf."",""henkilo"":""Kopra Pia /PerusS"",""paikka"":""55""},{""henkilo_sv"":""Oskala Hannu /Gröna"",""henkilo"":""Oskala Hannu /Vihr."",""paikka"":""56""},{""henkilo_sv"":""Yanar Ozan /Gröna"",""henkilo"":""Yanar Ozan /Vihr."",""paikka"":""57""},{""henkilo"":"""",""paikka"":""58""},{""henkilo_sv"":""Laisaari Johanna /SDP"",""henkilo"":""Laisaari Johanna /SDP"",""paikka"":""59""},{""henkilo_sv"":""Muttilainen Sami /Vänst."",""henkilo"":""Muttilainen Sami /Vas."",""paikka"":""60""},{""henkilo_sv"":""Meri Otto /Saml."",""henkilo"":""Meri Otto /Kok."",""paikka"":""61""},{""henkilo_sv"":""Nygård Mia /Saml."",""henkilo"":""Nygård Mia /Kok."",""paikka"":""62""},{""henkilo_sv"":""Pajunen Jenni /Saml."",""henkilo"":""Pajunen Jenni /Kok."",""paikka"":""63""},{""henkilo_sv"":""Ebeling Mika /KD"",""henkilo"":""Ebeling Mika /KD"",""paikka"":""64""},{""henkilo_sv"":""Terho Sampo /Blå"",""henkilo"":""Terho Sampo /Sin"",""paikka"":""65""},{""henkilo_sv"":""Ohisalo Maria /Gröna"",""henkilo"":""Ohisalo Maria /Vihr."",""paikka"":""66""},{""henkilo"":"""",""paikka"":""67""},{""henkilo_sv"":""Vanhanen Reetta /Gröna"",""henkilo"":""Vanhanen Reetta /Vihr."",""paikka"":""68""},{""henkilo_sv"":""Puhakka Sirpa /Vänst."",""henkilo"":""Puhakka Sirpa /Vas."",""paikka"":""69""},{""henkilo_sv"":""Hagman Sandra /Vänst."",""henkilo"":""Hagman Sandra /Vas."",""paikka"":""70""},{""henkilo_sv"":""Niskanen Dani /Saml."",""henkilo"":""Niskanen Dani /Kok."",""paikka"":""71""},{""henkilo_sv"":""Apter Ted /Saml."",""henkilo"":""Apter Ted /Kok."",""paikka"":""72""},{""henkilo_sv"":""Parpala Matti /Saml."",""henkilo"":""Parpala Matti /Kok."",""paikka"":""73""},{""henkilo_sv"":""Väyrynen Paavo /SH"",""henkilo"":""Väyrynen Paavo /TH"",""paikka"":""74""},{""henkilo_sv"":""Niinistö Jussi /Blå"",""henkilo"":""Niinistö Jussi /Sin"",""paikka"":""75""},{""henkilo"":"""",""paikka"":""76""},{""henkilo_sv"":""Harjanne Atte /Gröna"",""henkilo"":""Harjanne Atte /Vihr."",""paikka"":""77""},{""henkilo_sv"":""Silvo Satu /Gröna"",""henkilo"":""Silvo Satu /Vihr."",""paikka"":""78""},{""henkilo_sv"":""Korkkula Vesa /Vänst."",""henkilo"":""Korkkula Vesa /Vas."",""paikka"":""79""},{""henkilo_sv"":""Alanen Outi /Vänst."",""henkilo"":""Alanen Outi /Vas."",""paikka"":""80""},{""henkilo"":"""",""paikka"":""81""},{""henkilo_sv"":""Saxberg Mirita /Liik"",""henkilo"":""Saxberg Mirita /Liik"",""paikka"":""82""},{""henkilo_sv"":""Pennanen Petrus /ÖP"",""henkilo"":""Pennanen Petrus /AP"",""paikka"":""83""},{""henkilo_sv"":""Aro Katju /FP"",""henkilo"":""Aro Katju /FP"",""paikka"":""84""},{""henkilo"":"""",""paikka"":""85""}],""aikaleima"":""2019-12-11T16:07:28"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":669825003},""tapahtumalista"":{""tapahtumat"":[{""lasna"":80,""laji"":""nimenhuuto paattynyt"",""aikaleima"":""2019-12-11T16:07:29"",""poissa"":5,""snro"":669825002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""NHLOPPUU"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":669825001,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""tila"":""nimenhuuto paattynyt"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var rollCallEvent = result.Events[0] as RollCallEndsRoomEventDTO;
            Assert.NotNull(rollCallEvent);
            Assert.Equal(669825002, rollCallEvent.SequenceNumber);
            Assert.Equal(2019, rollCallEvent.Timestamp.Year);
            Assert.Equal(12, rollCallEvent.Timestamp.Month);
            Assert.Equal(11, rollCallEvent.Timestamp.Day);
            Assert.Equal("1", result.State!.CaseNumber);
            Assert.Equal("0", result.State.ItemNumber);
        }

        /// <summary>
        /// "asia/kohta"
        /// </summary>
        [Fact]
        public void CaseEvent()
        {
            var json = @"{""tapahtumalista"":{""tapahtumat"":[{""laji"":""asia/kohta"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""aikaleima"":""2019-12-11T16:06:06"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":587183002,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""tunniste"":""1 / Asia"",""kohtanumero"":""0""},{""laji"":""puheenvuorovaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:06:06"",""snro"":587183003},{""laji"":""repliikkivaraukset tyhjatty"",""aikaleima"":""2019-12-11T16:06:06"",""snro"":587183004}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""KOHDANALKU"",""paatosehdotus_sv"":""Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n"",""asianumero"":""1"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""asiateksti"":""Nimenhuuto, laillisuus ja päätösvaltaisuus"",""snro"":587183001,""asiateksti_sv"":""Namnupprop, laglighet och beslutsförhet"",""tila"":""keskustelu"",""paatosehdotus"":""Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n"",""kohtanumero"":""0"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";
            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            var caseEvent = result.Events[0] as CaseEventRoomDTO;
            Assert.NotNull(caseEvent);
            Assert.Equal("Kaupunginvaltuusto toteaa esteen ilmoittaneet valtuutetut ja heidän tilalleen tulevat varavaltuutetut, toimittaa nimenhuudon sekä toteaa kokouksen laillisuuden ja päätösvaltaisuuden.\n\n", caseEvent.PropositionFI);
            Assert.Equal("Stadsfullmäktige konstaterar vilka ledamöter som anmält förhinder och vilka ersättare som inträder i deras ställe, förrättar namnupprop och konstaterar att sammanträdet är lagligt och beslutsfört.\n\n", caseEvent.PropositionSV);
            Assert.Equal("1", caseEvent.CaseNumber);
            Assert.Equal("0", caseEvent.ItemNumber);
            Assert.Equal("Nimenhuuto, laillisuus ja päätösvaltaisuus", caseEvent.TextFI);
            Assert.Equal("Namnupprop, laglighet och beslutsförhet", caseEvent.TextSV);
            Assert.Equal("1 / Asia", caseEvent.Id);
        }

        /// <summary>
        /// "lasnaolijat"
        /// </summary>
        [Fact]
        public void SeatsListEvent()
        {
            var json = @"{""lasnaolijat"":{""paikat"":[{""henkilo"":"""",""paikka"":""101""},{""henkilo_sv"":""Sarvilinna Sami"",""henkilo"":""Sarvilinna Sami"",""paikka"":""102""},{""henkilo_sv"":""Sinnemäki Anni (Apri)"",""henkilo"":""Sinnemäki Anni (Apri)"",""paikka"":""103""},{""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""paikka"":""104""},{""henkilo_sv"":""Sevander Tomi (Apri)"",""henkilo"":""Sevander Tomi (Apri)"",""paikka"":""105""},{""henkilo_sv"":""Vesikansa Sanna (Apri)"",""henkilo"":""Vesikansa Sanna (Apri)"",""paikka"":""106""},{""henkilo"":"""",""paikka"":""107""},{""henkilo"":"""",""paikka"":""108""},{""henkilo"":"""",""paikka"":""91""},{""henkilo_sv"":""Månsson Björn /SFP"",""henkilo"":""Månsson Björn /SFP"",""paikka"":""1""},{""henkilo_sv"":""Koskinen Kauko /Saml."",""henkilo"":""Koskinen Kauko /Kok."",""paikka"":""2""},{""henkilo_sv"":""Bogomoloff Harry /Saml."",""henkilo"":""Bogomoloff Harry /Kok."",""paikka"":""3""},{""henkilo_sv"":""Sazonov Daniel /Saml."",""henkilo"":""Sazonov Daniel /Kok."",""paikka"":""4""},{""henkilo_sv"":""Hernberg Kaisa /Gröna"",""henkilo"":""Hernberg Kaisa /Vihr."",""paikka"":""5""},{""henkilo_sv"":""Soininvaara Osmo /Gröna"",""henkilo"":""Soininvaara Osmo /Vihr."",""paikka"":""6""},{""henkilo_sv"":""Sinnemäki Anni /Gröna"",""henkilo"":""Sinnemäki Anni /Vihr."",""paikka"":""7""},{""henkilo_sv"":""Heinäluoma Eveliina /SDP"",""henkilo"":""Heinäluoma Eveliina /SDP"",""paikka"":""8""},{""henkilo_sv"":""Taipale Ilkka /SDP"",""henkilo"":""Taipale Ilkka /SDP"",""paikka"":""9""},{""henkilo_sv"":""Vuorjoki Anna /Vänst."",""henkilo"":""Vuorjoki Anna /Vas."",""paikka"":""10""},{""henkilo_sv"":""Biaudet Eva /SFP"",""henkilo"":""Biaudet Eva /SFP"",""paikka"":""11""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""paikka"":""12""},{""henkilo_sv"":""Hakola Juha /Saml."",""henkilo"":""Hakola Juha /Kok."",""paikka"":""13""},{""henkilo_sv"":""Klemetti Tapio /Saml."",""henkilo"":""Klemetti Tapio /Kok."",""paikka"":""14""},{""henkilo_sv"":""Kari Emma /Gröna"",""henkilo"":""Kari Emma /Vihr."",""paikka"":""15""},{""henkilo_sv"":""Holopainen Mari /Gröna"",""henkilo"":""Holopainen Mari /Vihr."",""paikka"":""16""},{""henkilo_sv"":""Moisio Elina /Gröna"",""henkilo"":""Moisio Elina /Vihr."",""paikka"":""17""},{""henkilo_sv"":""Anttila Maija /SDP"",""henkilo"":""Anttila Maija /SDP"",""paikka"":""18""},{""henkilo_sv"":""Wallgren Thomas /SDP"",""henkilo"":""Wallgren Thomas /SDP"",""paikka"":""19""},{""henkilo_sv"":""Arhinmäki Paavo /Vänst."",""henkilo"":""Arhinmäki Paavo /Vas."",""paikka"":""20""},{""henkilo_sv"":""Rantala Marcus /SFP"",""henkilo"":""Rantala Marcus /SFP"",""paikka"":""21""},{""henkilo_sv"":""Asko-Seljavaara Sirpa /Saml."",""henkilo"":""Asko-Seljavaara Sirpa /Kok."",""paikka"":""22""},{""henkilo_sv"":""Karhuvaara Arja /Saml."",""henkilo"":""Karhuvaara Arja /Kok."",""paikka"":""23""},{""henkilo_sv"":""Rautava Risto /Saml."",""henkilo"":""Rautava Risto /Kok."",""paikka"":""24""},{""henkilo_sv"":""Raatikainen Mika /Sannf."",""henkilo"":""Raatikainen Mika /PerusS"",""paikka"":""25""},{""henkilo_sv"":""Rantanen Tuomas /Gröna"",""henkilo"":""Rantanen Tuomas /Vihr."",""paikka"":""26""},{""henkilo_sv"":""Stranius Leo /Gröna"",""henkilo"":""Stranius Leo /Vihr."",""paikka"":""27""},{""henkilo_sv"":""Arajärvi Pentti /SDP"",""henkilo"":""Arajärvi Pentti /SDP"",""paikka"":""28""},{""henkilo_sv"":""Sevander Tomi /SDP"",""henkilo"":""Sevander Tomi /SDP"",""paikka"":""29""},{""henkilo_sv"":""Haglund Mia /Vänst."",""henkilo"":""Haglund Mia /Vas."",""paikka"":""30""},{""henkilo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""henkilo"":""Borgarsdóttir Sandelin Silja /SFP"",""paikka"":""31""},{""henkilo_sv"":""Varjokari Laura /Saml."",""henkilo"":""Varjokari Laura /Kok."",""paikka"":""32""},{""henkilo_sv"":""Koulumies Terhi /Saml."",""henkilo"":""Koulumies Terhi /Kok."",""paikka"":""33""},{""henkilo_sv"":""Pelkonen Jaana /Saml."",""henkilo"":""Pelkonen Jaana /Kok."",""paikka"":""34""},{""henkilo_sv"":""Turkkila Matias /Sannf."",""henkilo"":""Turkkila Matias /PerusS"",""paikka"":""35""},{""henkilo_sv"":""Hamid Jasmin /Gröna"",""henkilo"":""Hamid Jasmin /Vihr."",""paikka"":""36""},{""henkilo_sv"":""Vesikansa Sanna /Gröna"",""henkilo"":""Vesikansa Sanna /Vihr."",""paikka"":""37""},{""henkilo_sv"":""Jalovaara Ville /SDP"",""henkilo"":""Jalovaara Ville /SDP"",""paikka"":""38""},{""henkilo_sv"":""Torsti Pilvi /SDP"",""henkilo"":""Torsti Pilvi /SDP"",""paikka"":""39""},{""henkilo_sv"":""Honkasalo Veronika /Vänst."",""henkilo"":""Honkasalo Veronika /Vas."",""paikka"":""40""},{""henkilo_sv"":""Finne-Elonen Laura /SFP"",""henkilo"":""Finne-Elonen Laura /SFP"",""paikka"":""41""},{""henkilo_sv"":""Rydman Wille /Saml."",""henkilo"":""Rydman Wille /Kok."",""paikka"":""42""},{""henkilo_sv"":""Pakarinen Pia /Saml."",""henkilo"":""Pakarinen Pia /Kok."",""paikka"":""43""},{""henkilo_sv"":""Peltokorpi Terhi /Cent."",""henkilo"":""Peltokorpi Terhi /Kesk."",""paikka"":""44""},{""henkilo_sv"":""Rantanen Mari /Sannf."",""henkilo"":""Rantanen Mari /PerusS"",""paikka"":""45""},{""henkilo_sv"":""Juva Kati /Gröna"",""henkilo"":""Juva Kati /Vihr."",""paikka"":""46""},{""henkilo_sv"":""Sydänmaa Johanna /Gröna"",""henkilo"":""Sydänmaa Johanna /Vihr."",""paikka"":""47""},{""henkilo_sv"":""Järvinen Jukka /SDP"",""henkilo"":""Järvinen Jukka /SDP"",""paikka"":""48""},{""henkilo_sv"":""Vepsä Sinikka /SDP"",""henkilo"":""Vepsä Sinikka /SDP"",""paikka"":""49""},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""paikka"":""50""},{""henkilo_sv"":""Laaksonen Heimo /Saml."",""henkilo"":""Laaksonen Heimo /Kok."",""paikka"":""51""},{""henkilo_sv"":""Kaleva Atte /Saml."",""henkilo"":""Kaleva Atte /Kok."",""paikka"":""52""},{""henkilo_sv"":""Pasterstein Dennis /Saml."",""henkilo"":""Pasterstein Dennis /Kok."",""paikka"":""53""},{""henkilo_sv"":""Kolbe Laura /Cent."",""henkilo"":""Kolbe Laura /Kesk."",""paikka"":""54""},{""henkilo_sv"":""Kopra Pia /Sannf."",""henkilo"":""Kopra Pia /PerusS"",""paikka"":""55""},{""henkilo_sv"":""Oskala Hannu /Gröna"",""henkilo"":""Oskala Hannu /Vihr."",""paikka"":""56""},{""henkilo_sv"":""Yanar Ozan /Gröna"",""henkilo"":""Yanar Ozan /Vihr."",""paikka"":""57""},{""henkilo_sv"":""Hussein Abdirahim Husu /SDP"",""henkilo"":""Hussein Abdirahim Husu /SDP"",""paikka"":""58""},{""henkilo_sv"":""Laisaari Johanna /SDP"",""henkilo"":""Laisaari Johanna /SDP"",""paikka"":""59""},{""henkilo_sv"":""Muttilainen Sami /Vänst."",""henkilo"":""Muttilainen Sami /Vas."",""paikka"":""60""},{""henkilo_sv"":""Meri Otto /Saml."",""henkilo"":""Meri Otto /Kok."",""paikka"":""61""},{""henkilo_sv"":""Nygård Mia /Saml."",""henkilo"":""Nygård Mia /Kok."",""paikka"":""62""},{""henkilo_sv"":""Pajunen Jenni /Saml."",""henkilo"":""Pajunen Jenni /Kok."",""paikka"":""63""},{""henkilo_sv"":""Ebeling Mika /KD"",""henkilo"":""Ebeling Mika /KD"",""paikka"":""64""},{""henkilo_sv"":""Terho Sampo /Blå"",""henkilo"":""Terho Sampo /Sin"",""paikka"":""65""},{""henkilo_sv"":""Ohisalo Maria /Gröna"",""henkilo"":""Ohisalo Maria /Vihr."",""paikka"":""66""},{""henkilo_sv"":""Alametsä Alviina /Gröna"",""henkilo"":""Alametsä Alviina /Vihr."",""paikka"":""67""},{""henkilo_sv"":""Vanhanen Reetta /Gröna"",""henkilo"":""Vanhanen Reetta /Vihr."",""paikka"":""68""},{""henkilo_sv"":""Puhakka Sirpa /Vänst."",""henkilo"":""Puhakka Sirpa /Vas."",""paikka"":""69""},{""henkilo_sv"":""Hagman Sandra /Vänst."",""henkilo"":""Hagman Sandra /Vas."",""paikka"":""70""},{""henkilo_sv"":""Niskanen Dani /Saml."",""henkilo"":""Niskanen Dani /Kok."",""paikka"":""71""},{""henkilo_sv"":""Apter Ted /Saml."",""henkilo"":""Apter Ted /Kok."",""paikka"":""72""},{""henkilo_sv"":""Parpala Matti /Saml."",""henkilo"":""Parpala Matti /Kok."",""paikka"":""73""},{""henkilo_sv"":""Väyrynen Paavo /SH"",""henkilo"":""Väyrynen Paavo /TH"",""paikka"":""74""},{""henkilo_sv"":""Niinistö Jussi /Blå"",""henkilo"":""Niinistö Jussi /Sin"",""paikka"":""75""},{""henkilo_sv"":""Diarra Fatim /Gröna"",""henkilo"":""Diarra Fatim /Vihr."",""paikka"":""76""},{""henkilo_sv"":""Harjanne Atte /Gröna"",""henkilo"":""Harjanne Atte /Vihr."",""paikka"":""77""},{""henkilo_sv"":""Silvo Satu /Gröna"",""henkilo"":""Silvo Satu /Vihr."",""paikka"":""78""},{""henkilo_sv"":""Korkkula Vesa /Vänst."",""henkilo"":""Korkkula Vesa /Vas."",""paikka"":""79""},{""henkilo_sv"":""Alanen Outi /Vänst."",""henkilo"":""Alanen Outi /Vas."",""paikka"":""80""},{""henkilo_sv"":""Harkimo Joel /Liik"",""henkilo"":""Harkimo Joel /Liik"",""paikka"":""81""},{""henkilo_sv"":""Saxberg Mirita /Liik"",""henkilo"":""Saxberg Mirita /Liik"",""paikka"":""82""},{""henkilo_sv"":""Pennanen Petrus /ÖP"",""henkilo"":""Pennanen Petrus /AP"",""paikka"":""83""},{""henkilo_sv"":""Aro Katju /FP"",""henkilo"":""Aro Katju /FP"",""paikka"":""84""},{""henkilo"":"""",""paikka"":""85""}],""aikaleima"":""2019-12-11T15:42:34"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":266003},""tapahtumalista"":{""tapahtumat"":[{""laji"":""kokous alkaa"",""aikaleima"":""2019-12-11T15:56:19"",""snro"":266002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""ISTUNNONALKU"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":266001,""tila"":""kokous kaynnissa"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";

            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);
            Assert.Equal(94, result.AttendeesListRoom.Seats.Length);
            Assert.Equal("Sarvilinna Sami", result.AttendeesListRoom.Seats[1].PersonFI);
            Assert.Equal("Sarvilinna Sami", result.AttendeesListRoom.Seats[1].PersonSV);
            Assert.Equal("102", result.AttendeesListRoom.Seats[1].Seat);
        }

        /// <summary>
        /// "kokous alkaa"
        /// </summary>
        [Fact]
        public void MeetingStartsEvent()
        {
            var json = @"{""lasnaolijat"":{""paikat"":[{""henkilo"":"""",""paikka"":""101""},{""henkilo_sv"":""Sarvilinna Sami"",""henkilo"":""Sarvilinna Sami"",""paikka"":""102""},{""henkilo_sv"":""Sinnemäki Anni (Apri)"",""henkilo"":""Sinnemäki Anni (Apri)"",""paikka"":""103""},{""henkilo_sv"":""Pakarinen Pia (Apri)"",""henkilo"":""Pakarinen Pia (Apri)"",""paikka"":""104""},{""henkilo_sv"":""Sevander Tomi (Apri)"",""henkilo"":""Sevander Tomi (Apri)"",""paikka"":""105""},{""henkilo_sv"":""Vesikansa Sanna (Apri)"",""henkilo"":""Vesikansa Sanna (Apri)"",""paikka"":""106""},{""henkilo"":"""",""paikka"":""107""},{""henkilo"":"""",""paikka"":""108""},{""henkilo"":"""",""paikka"":""91""},{""henkilo_sv"":""Månsson Björn /SFP"",""henkilo"":""Månsson Björn /SFP"",""paikka"":""1""},{""henkilo_sv"":""Koskinen Kauko /Saml."",""henkilo"":""Koskinen Kauko /Kok."",""paikka"":""2""},{""henkilo_sv"":""Bogomoloff Harry /Saml."",""henkilo"":""Bogomoloff Harry /Kok."",""paikka"":""3""},{""henkilo_sv"":""Sazonov Daniel /Saml."",""henkilo"":""Sazonov Daniel /Kok."",""paikka"":""4""},{""henkilo_sv"":""Hernberg Kaisa /Gröna"",""henkilo"":""Hernberg Kaisa /Vihr."",""paikka"":""5""},{""henkilo_sv"":""Soininvaara Osmo /Gröna"",""henkilo"":""Soininvaara Osmo /Vihr."",""paikka"":""6""},{""henkilo_sv"":""Sinnemäki Anni /Gröna"",""henkilo"":""Sinnemäki Anni /Vihr."",""paikka"":""7""},{""henkilo_sv"":""Heinäluoma Eveliina /SDP"",""henkilo"":""Heinäluoma Eveliina /SDP"",""paikka"":""8""},{""henkilo_sv"":""Taipale Ilkka /SDP"",""henkilo"":""Taipale Ilkka /SDP"",""paikka"":""9""},{""henkilo_sv"":""Vuorjoki Anna /Vänst."",""henkilo"":""Vuorjoki Anna /Vas."",""paikka"":""10""},{""henkilo_sv"":""Biaudet Eva /SFP"",""henkilo"":""Biaudet Eva /SFP"",""paikka"":""11""},{""henkilo_sv"":""Urho Ulla-Marja /Saml."",""henkilo"":""Urho Ulla-Marja /Kok."",""paikka"":""12""},{""henkilo_sv"":""Hakola Juha /Saml."",""henkilo"":""Hakola Juha /Kok."",""paikka"":""13""},{""henkilo_sv"":""Klemetti Tapio /Saml."",""henkilo"":""Klemetti Tapio /Kok."",""paikka"":""14""},{""henkilo_sv"":""Kari Emma /Gröna"",""henkilo"":""Kari Emma /Vihr."",""paikka"":""15""},{""henkilo_sv"":""Holopainen Mari /Gröna"",""henkilo"":""Holopainen Mari /Vihr."",""paikka"":""16""},{""henkilo_sv"":""Moisio Elina /Gröna"",""henkilo"":""Moisio Elina /Vihr."",""paikka"":""17""},{""henkilo_sv"":""Anttila Maija /SDP"",""henkilo"":""Anttila Maija /SDP"",""paikka"":""18""},{""henkilo_sv"":""Wallgren Thomas /SDP"",""henkilo"":""Wallgren Thomas /SDP"",""paikka"":""19""},{""henkilo_sv"":""Arhinmäki Paavo /Vänst."",""henkilo"":""Arhinmäki Paavo /Vas."",""paikka"":""20""},{""henkilo_sv"":""Rantala Marcus /SFP"",""henkilo"":""Rantala Marcus /SFP"",""paikka"":""21""},{""henkilo_sv"":""Asko-Seljavaara Sirpa /Saml."",""henkilo"":""Asko-Seljavaara Sirpa /Kok."",""paikka"":""22""},{""henkilo_sv"":""Karhuvaara Arja /Saml."",""henkilo"":""Karhuvaara Arja /Kok."",""paikka"":""23""},{""henkilo_sv"":""Rautava Risto /Saml."",""henkilo"":""Rautava Risto /Kok."",""paikka"":""24""},{""henkilo_sv"":""Raatikainen Mika /Sannf."",""henkilo"":""Raatikainen Mika /PerusS"",""paikka"":""25""},{""henkilo_sv"":""Rantanen Tuomas /Gröna"",""henkilo"":""Rantanen Tuomas /Vihr."",""paikka"":""26""},{""henkilo_sv"":""Stranius Leo /Gröna"",""henkilo"":""Stranius Leo /Vihr."",""paikka"":""27""},{""henkilo_sv"":""Arajärvi Pentti /SDP"",""henkilo"":""Arajärvi Pentti /SDP"",""paikka"":""28""},{""henkilo_sv"":""Sevander Tomi /SDP"",""henkilo"":""Sevander Tomi /SDP"",""paikka"":""29""},{""henkilo_sv"":""Haglund Mia /Vänst."",""henkilo"":""Haglund Mia /Vas."",""paikka"":""30""},{""henkilo_sv"":""Borgarsdóttir Sandelin Silja /SFP"",""henkilo"":""Borgarsdóttir Sandelin Silja /SFP"",""paikka"":""31""},{""henkilo_sv"":""Varjokari Laura /Saml."",""henkilo"":""Varjokari Laura /Kok."",""paikka"":""32""},{""henkilo_sv"":""Koulumies Terhi /Saml."",""henkilo"":""Koulumies Terhi /Kok."",""paikka"":""33""},{""henkilo_sv"":""Pelkonen Jaana /Saml."",""henkilo"":""Pelkonen Jaana /Kok."",""paikka"":""34""},{""henkilo_sv"":""Turkkila Matias /Sannf."",""henkilo"":""Turkkila Matias /PerusS"",""paikka"":""35""},{""henkilo_sv"":""Hamid Jasmin /Gröna"",""henkilo"":""Hamid Jasmin /Vihr."",""paikka"":""36""},{""henkilo_sv"":""Vesikansa Sanna /Gröna"",""henkilo"":""Vesikansa Sanna /Vihr."",""paikka"":""37""},{""henkilo_sv"":""Jalovaara Ville /SDP"",""henkilo"":""Jalovaara Ville /SDP"",""paikka"":""38""},{""henkilo_sv"":""Torsti Pilvi /SDP"",""henkilo"":""Torsti Pilvi /SDP"",""paikka"":""39""},{""henkilo_sv"":""Honkasalo Veronika /Vänst."",""henkilo"":""Honkasalo Veronika /Vas."",""paikka"":""40""},{""henkilo_sv"":""Finne-Elonen Laura /SFP"",""henkilo"":""Finne-Elonen Laura /SFP"",""paikka"":""41""},{""henkilo_sv"":""Rydman Wille /Saml."",""henkilo"":""Rydman Wille /Kok."",""paikka"":""42""},{""henkilo_sv"":""Pakarinen Pia /Saml."",""henkilo"":""Pakarinen Pia /Kok."",""paikka"":""43""},{""henkilo_sv"":""Peltokorpi Terhi /Cent."",""henkilo"":""Peltokorpi Terhi /Kesk."",""paikka"":""44""},{""henkilo_sv"":""Rantanen Mari /Sannf."",""henkilo"":""Rantanen Mari /PerusS"",""paikka"":""45""},{""henkilo_sv"":""Juva Kati /Gröna"",""henkilo"":""Juva Kati /Vihr."",""paikka"":""46""},{""henkilo_sv"":""Sydänmaa Johanna /Gröna"",""henkilo"":""Sydänmaa Johanna /Vihr."",""paikka"":""47""},{""henkilo_sv"":""Järvinen Jukka /SDP"",""henkilo"":""Järvinen Jukka /SDP"",""paikka"":""48""},{""henkilo_sv"":""Vepsä Sinikka /SDP"",""henkilo"":""Vepsä Sinikka /SDP"",""paikka"":""49""},{""henkilo_sv"":""Koivulaakso Dan /Vänst."",""henkilo"":""Koivulaakso Dan /Vas."",""paikka"":""50""},{""henkilo_sv"":""Laaksonen Heimo /Saml."",""henkilo"":""Laaksonen Heimo /Kok."",""paikka"":""51""},{""henkilo_sv"":""Kaleva Atte /Saml."",""henkilo"":""Kaleva Atte /Kok."",""paikka"":""52""},{""henkilo_sv"":""Pasterstein Dennis /Saml."",""henkilo"":""Pasterstein Dennis /Kok."",""paikka"":""53""},{""henkilo_sv"":""Kolbe Laura /Cent."",""henkilo"":""Kolbe Laura /Kesk."",""paikka"":""54""},{""henkilo_sv"":""Kopra Pia /Sannf."",""henkilo"":""Kopra Pia /PerusS"",""paikka"":""55""},{""henkilo_sv"":""Oskala Hannu /Gröna"",""henkilo"":""Oskala Hannu /Vihr."",""paikka"":""56""},{""henkilo_sv"":""Yanar Ozan /Gröna"",""henkilo"":""Yanar Ozan /Vihr."",""paikka"":""57""},{""henkilo_sv"":""Hussein Abdirahim Husu /SDP"",""henkilo"":""Hussein Abdirahim Husu /SDP"",""paikka"":""58""},{""henkilo_sv"":""Laisaari Johanna /SDP"",""henkilo"":""Laisaari Johanna /SDP"",""paikka"":""59""},{""henkilo_sv"":""Muttilainen Sami /Vänst."",""henkilo"":""Muttilainen Sami /Vas."",""paikka"":""60""},{""henkilo_sv"":""Meri Otto /Saml."",""henkilo"":""Meri Otto /Kok."",""paikka"":""61""},{""henkilo_sv"":""Nygård Mia /Saml."",""henkilo"":""Nygård Mia /Kok."",""paikka"":""62""},{""henkilo_sv"":""Pajunen Jenni /Saml."",""henkilo"":""Pajunen Jenni /Kok."",""paikka"":""63""},{""henkilo_sv"":""Ebeling Mika /KD"",""henkilo"":""Ebeling Mika /KD"",""paikka"":""64""},{""henkilo_sv"":""Terho Sampo /Blå"",""henkilo"":""Terho Sampo /Sin"",""paikka"":""65""},{""henkilo_sv"":""Ohisalo Maria /Gröna"",""henkilo"":""Ohisalo Maria /Vihr."",""paikka"":""66""},{""henkilo_sv"":""Alametsä Alviina /Gröna"",""henkilo"":""Alametsä Alviina /Vihr."",""paikka"":""67""},{""henkilo_sv"":""Vanhanen Reetta /Gröna"",""henkilo"":""Vanhanen Reetta /Vihr."",""paikka"":""68""},{""henkilo_sv"":""Puhakka Sirpa /Vänst."",""henkilo"":""Puhakka Sirpa /Vas."",""paikka"":""69""},{""henkilo_sv"":""Hagman Sandra /Vänst."",""henkilo"":""Hagman Sandra /Vas."",""paikka"":""70""},{""henkilo_sv"":""Niskanen Dani /Saml."",""henkilo"":""Niskanen Dani /Kok."",""paikka"":""71""},{""henkilo_sv"":""Apter Ted /Saml."",""henkilo"":""Apter Ted /Kok."",""paikka"":""72""},{""henkilo_sv"":""Parpala Matti /Saml."",""henkilo"":""Parpala Matti /Kok."",""paikka"":""73""},{""henkilo_sv"":""Väyrynen Paavo /SH"",""henkilo"":""Väyrynen Paavo /TH"",""paikka"":""74""},{""henkilo_sv"":""Niinistö Jussi /Blå"",""henkilo"":""Niinistö Jussi /Sin"",""paikka"":""75""},{""henkilo_sv"":""Diarra Fatim /Gröna"",""henkilo"":""Diarra Fatim /Vihr."",""paikka"":""76""},{""henkilo_sv"":""Harjanne Atte /Gröna"",""henkilo"":""Harjanne Atte /Vihr."",""paikka"":""77""},{""henkilo_sv"":""Silvo Satu /Gröna"",""henkilo"":""Silvo Satu /Vihr."",""paikka"":""78""},{""henkilo_sv"":""Korkkula Vesa /Vänst."",""henkilo"":""Korkkula Vesa /Vas."",""paikka"":""79""},{""henkilo_sv"":""Alanen Outi /Vänst."",""henkilo"":""Alanen Outi /Vas."",""paikka"":""80""},{""henkilo_sv"":""Harkimo Joel /Liik"",""henkilo"":""Harkimo Joel /Liik"",""paikka"":""81""},{""henkilo_sv"":""Saxberg Mirita /Liik"",""henkilo"":""Saxberg Mirita /Liik"",""paikka"":""82""},{""henkilo_sv"":""Pennanen Petrus /ÖP"",""henkilo"":""Pennanen Petrus /AP"",""paikka"":""83""},{""henkilo_sv"":""Aro Katju /FP"",""henkilo"":""Aro Katju /FP"",""paikka"":""84""},{""henkilo"":"""",""paikka"":""85""}],""aikaleima"":""2019-12-11T15:42:34"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":266003},""tapahtumalista"":{""tapahtumat"":[{""laji"":""kokous alkaa"",""aikaleima"":""2019-12-11T15:56:19"",""snro"":266002}],""kokous"":""2019/21 2019-12-11 15:56:19.358""},""versio"":""2"",""tilakysely"":{""kokousotsikko_sv"":""Stadsfullmäktige 21/11.12.2019"",""tapahtumatyyppi"":""ISTUNNONALKU"",""kokous"":""2019/21 2019-12-11 15:56:19.358"",""snro"":266001,""tila"":""kokous kaynnissa"",""kokousotsikko"":""Kaupunginvaltuusto 21/11.12.2019""}}";

            var parser = new MeetingEventParser();
            var result = parser.ParseJsonMessage(json);

            Assert.NotNull(result);
            Assert.Single(result.Events);
            Assert.Equal("2019/21 2019-12-11 15:56:19.358", result.MeetingID);
            Assert.Equal("Stadsfullmäktige 21/11.12.2019", result.State!.MeetingTitleSV);
            Assert.Equal("Kaupunginvaltuusto 21/11.12.2019", result.State!.MeetingTitleFI);
            Assert.Equal(266002, result.Events[0].SequenceNumber);
            Assert.Equal(2019, result.Events[0].Timestamp.Year);
            Assert.Equal(12, result.Events[0].Timestamp.Month);
            Assert.Equal(11, result.Events[0].Timestamp.Day);
        }
    }
}
